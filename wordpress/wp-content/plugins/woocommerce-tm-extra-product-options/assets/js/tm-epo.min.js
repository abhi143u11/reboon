!function(t){"use strict";function e(){var t=1.1;return t=/^1(.+)1$/.exec(t.toLocaleString())[1]}function a(t,e,a){var i,o,r,n;if(e|=0,i=Math.pow(10,e),t*=i,n=t>0|-(t<0),r=t%1===.5*n,o=Math.floor(t),r)switch(a){case"PHP_ROUND_HALF_DOWN":t=o+(n<0);break;case"PHP_ROUND_HALF_EVEN":t=o+o%2*n;break;case"PHP_ROUND_HALF_ODD":t=o+!(o%2);break;default:t=o+(n>0)}return(r?t:Math.round(t))/i}function i(e){var a;return a=t(e).is(".cpf_hide_element")?t(e):t(e).closest(".cpf_hide_element"),t(a).data("isactive")!==!1&&t(a).closest(".cpf-section").data("isactive")!==!1?(t(e).prop("disabled",!1),!0):(t(e).is(".cpf_hide_element")||t(e).prop("disabled",!0),!1)}function o(t){var e;if(void 0!==t.per_product_pricing)e=t.per_product_pricing;else if(void 0!==t.is_priced_individually)for(var a in t.is_priced_individually)e=t.is_priced_individually[a];return e===!0||"yes"==e}function r(e){t(e).length||(e="body"),e=t(e);var a=e.find(".iscpfdependson");a.each(function(e,a){t(a).each(function(e,a){n(t(a))})}),a.each(function(e,a){t(a).each(function(e,a){n(t(a),"cpflogic")})}),a.each(function(e,a){t(a).each(function(e,a){a=t(a),a.is(".cpf-section")&&(a=a.find(".cpf_hide_element")),a.each(function(e,a){i(t(a).find(".tm-epo-field"))})})}),t().selectric&&t(".tm-extra-product-options select").selectric("refresh"),t(".tm-owl-slider").each(function(){t(this).trigger("refresh.owl.carousel")});var o=[];e.find(".tm-product-image:checked,select.tm-product-image").each(function(){var e=t(this);i(e)&&""!==e.val()&&o.push(e)}),o.length&&o[o.length-1].trigger("tm_trigger_product_image"),B.trigger("cpflogicrun"),B.trigger("tmlazy")}function n(e,a){e.each(function(e,o){var r=t(this),n=r.data("matches"),c=r.data("toggle"),s=r.data("what"),p=r.data("fields"),l=0,m=!1;switch(c){case"show":m=!1;break;case"hide":m=!0}t.each(p,function(e,o){var r=!0;"cpflogic"==a&&(r=i(t(o.element))),r&&d(o)&&l++}),"all"==s?n==l&&(m=!m):l>0&&(m=!m),m?r.removeClass("tc-hidden"):r.addClass("tc-hidden"),r.data("isactive",m)})}function c(e,a){var o,r=!0,n=e.find(".cpf_hide_element");return t(n).each(function(e,n){if(n=t(n),i(n)){var c=n.attr("class").split(" ").map(function(t){if(t.indexOf("cpf-type-",0)!==-1)return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(c.length>0){switch(c=c[0]){case"cpf-type-radio":var d=n.find("input.tm-epo-field.tmcp-radio:checked");"isnotempty"==a?r=r&&d.length>0:"isempty"==a&&(r=r&&0==d.length);break;case"cpf-type-checkbox":var s=n.find("input.tm-epo-field.tmcp-checkbox:checked");"isnotempty"==a?r=r&&s.length>0:"isempty"==a&&(r=r&&0==s.length);break;case"cpf-type-select":var l=n.find("select.tm-epo-field.tmcp-select").children("option"),m=n.find("select.tm-epo-field.tmcp-select").children("option:selected"),f=l.index(m);""===l.eq(0).val()&&""===l.eq(0).attr("data-rulestype")&&(f-=1);var _="_"+f;_=_.length,o=n.find("select.tm-epo-field.tmcp-select").val(),o&&(o=o.slice(0,-_));break;case"cpf-type-textarea":o=n.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":o=n.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-range":o=n.find("input.tm-epo-field.tmcp-range").val()}r=r&&p(o,"",a)}else r=r&&!1}}),r}function d(e){var a,i=t(e.element),o=e.operator,r=e.value;if(!i.length)return!1;if(i.is(".cpf-section"))return c(i,o);var n=i.attr("class").split(" ").map(function(t){if(t.indexOf("cpf-type-",0)!==-1)return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(n.length>0){switch(n=n[0]){case"cpf-type-radio":var d=i.find("input.tm-epo-field.tmcp-radio"),l=i.find("input.tm-epo-field.tmcp-radio:checked");if("is"==o||"isnot"==o){if(0==l.length)return!1;var m=d.index(l),f="_"+m;f=f.length,a=i.find("input.tm-epo-field.tmcp-radio:checked").val(),a&&(a=a.slice(0,-f))}else{if("isnotempty"==o)return l.length>0;if("isempty"==o)return 0==l.length}break;case"cpf-type-checkbox":var _=i.find("input.tm-epo-field.tmcp-checkbox"),u=i.find("input.tm-epo-field.tmcp-checkbox:checked");if("is"==o||"isnot"==o){if(0==u.length)return!1;var h=!1;return u.each(function(e,i){var n=_.index(t(i)),c="_"+n;if(c=c.length,a=t(i).val(),a&&(a=a.slice(0,-c)),p(a,r,o))h=!0;else if("isnot"==o)return h=!1,!1}),h}if("isnotempty"==o)return u.length>0;if("isempty"==o)return 0==u.length;break;case"cpf-type-select":var v=i.find("select.tm-epo-field.tmcp-select").children("option"),g=i.find("select.tm-epo-field.tmcp-select").children("option:selected"),m=v.index(g);""===v.eq(0).val()&&""===v.eq(0).attr("data-rulestype")&&(m-=1);var f="_"+m;f=f.length,a=i.find("select.tm-epo-field.tmcp-select").val(),a&&(a=a.slice(0,-f));break;case"cpf-type-textarea":a=i.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":a=i.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-range":a=i.find("input.tm-epo-field.tmcp-range").val();break;case"cpf-type-variations":return s(i,r,o)}return p(a,r,o)}return!1}function s(e,a,i){null!==e&&null!==a&&(a=a?parseInt(a):-1);var o,r=t(e).closest(".variations_form"),n='input[name^="variation_id"]';switch(r.find("input.variation_id").length>0&&(n="input.variation_id"),o=r.find(n).val(),i){case"is":return""!=o&&o==a;case"isnot":return""!=o&&o!=a;case"isempty":return""==o||0==o;case"isnotempty":return!(""==o||0==o);case"startswith":return o.startsWith(a);case"endswith":return o.endsWith(a);case"greaterthan":return parseFloat(o)>parseFloat(a);case"lessthan":return parseFloat(o)<parseFloat(a)}return!1}function p(e,a,i){switch(null!=e&&null!=a&&(e=encodeURIComponent(e),a=t.qtranxj_split?encodeURIComponent(t.qtranxj_split(decodeURIComponent(a))[tm_epo_q_translate_x_clogic_js.language]):encodeURIComponent(decodeURIComponent(a)),e=e?e.toLowerCase():"",a=a?a.toLowerCase():""),i){case"is":return null!=e&&e==a;case"isnot":return null!=e&&e!=a;case"isempty":return!(void 0!=e&&""!=e);case"isnotempty":return void 0!=e&&""!=e;case"startswith":return e.startsWith(a);case"endswith":return e.endsWith(a);case"greaterthan":return parseFloat(e)>parseFloat(a);case"lessthan":return parseFloat(e)<parseFloat(a)}return!1}function l(e){if(0!=t(e).length){if(t(e).is(".cpf-section"))return e.find(".tm-epo-field");var a=e.attr("class").split(" ").map(function(t){if(t.indexOf("cpf-type-",0)!==-1)return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(a.length>0)switch(a=a[0]){case"cpf-type-radio":return e.find(".tm-epo-field.tmcp-radio");case"cpf-type-checkbox":return e.find(".tm-epo-field.tmcp-checkbox");case"cpf-type-select":return e.find(".tm-epo-field.tmcp-select");case"cpf-type-textarea":return e.find(".tm-epo-field.tmcp-textarea");case"cpf-type-textfield":return e.find(".tm-epo-field.tmcp-textfield");case"cpf-type-range":return e.find(".tm-epo-field.tmcp-range");case"cpf-type-date":return e.find(".tm-epo-field.tmcp-date");case"cpf-type-variations":return e.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element")}else;}}function m(t){return"object"==typeof t&&"toggle"in t&&"what"in t&&"rules"in t&&t.rules.length>0}function f(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.each(function(e,o){var r;r=t(o).is(".cpf-section")?t(o):t(o).find(".cpf-section"),r.each(function(e,o){var r=t(o),n=r.data("logic"),c=parseInt(r.data("haslogic")),d=[];1==c&&m(n)&&(t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,c=e.element,s=e.operator,p=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=c!=n?o.find(".cpf_hide_element").eq(c):o):r=c!=n?i.find(".cpf_hide_element").eq(c):o,d.push({element:r,operator:s,value:p})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",d),r.cpfdependson(d,n.toggle,n.what)))})})}function _(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.find(".cpf_hide_element").each(function(e,o){var r=t(o),n=r.data("logic"),c=parseInt(r.data("haslogic"));if(1==c&&m(n)){var d=[];t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,c=e.element,s=e.operator,p=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=c!=n?o.find(".cpf_hide_element").eq(c):o):r=c!=n?i.find(".cpf_hide_element").eq(c):o,d.push({element:r,operator:s,value:p})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",d),r.cpfdependson(d,n.toggle,n.what))}})}function u(t,e,a){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-base-tax-rate"),n=e.attr("data-prices-include-tax"),c=e.attr("data-is-vat-exempt"),d=e.attr("data-non-base-location-prices"),s=e.attr("data-base-taxes-of-one"),p=e.attr("data-modded-taxes-of-one");a&&a.data("tax-obj")&&(o=a.data("tax-obj"),o=o.tax_rate,r=o),i&&("1"==n?"1"==c?t=parseFloat(t)*(1-r/100):"1"==d&&(t=parseFloat(t)-s*t+p*t):t=parseFloat(t)*(1+o/100))}return t/=1e4}function h(t,e,a){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-base-taxes-of-one"),n=e.attr("data-prices-include-tax");a&&a.data("tax-obj")&&(o=a.data("tax-obj"),o=o.tax_rate),i&&"1"==n&&(t=parseFloat(t)-parseFloat(r*t))}return t/=1e4}function v(t,e,a){if(isNaN(parseFloat(t))&&(t=0),e){var i=e.attr("data-tax-display-mode");t="incl"==i?u(t,e,a):h(t,e,a)}return t}function g(t,e,a){if(e){var i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),n=e.attr("data-prices-include-tax");i&&("excl"==r||"1"==n||(t=parseFloat(t)/(1+o/100)))}return t}function b(t,e,a,i,o){a||(t=v(t,e,o));var r="";return e&&i&&(r=e.attr("data-tax-string")),void 0==r&&(r=""),accounting.formatMoney(t,{symbol:tm_epo_js.currency_format_symbol,decimal:z,thousand:D,precision:tm_epo_js.currency_format_num_decimals,format:tm_epo_js.currency_format})+r}function y(e,a,i,o,r){var n=t(e);if(0!=n.length){var c=n.closest(".tmcp-field-wrap"),d=c.find(".before-amount,.after-amount"),s={price:i,original_price:r};if("yes"==tm_epo_js.tm_epo_auto_hide_price_if_zero&&0!=a||"yes"!=tm_epo_js.tm_epo_auto_hide_price_if_zero){var p=c.find(".tm-epo-field");p.length>0&&p.is(".tmcp-select")&&""===p.val()?(n.empty(),d.addClass("tm-hidden")):(o&&void 0!=o&&parseFloat(o)!==parseFloat(a)?n.html(t.fn.tm_template(Q.sale_price,{price:s})):n.html(t.fn.tm_template(Q.price,{price:s})),d.removeClass("tm-hidden"))}else n.empty(),d.addClass("tm-hidden")}}function w(t,e,a){O[O.length]={name:t,selector:e,func:a}}function k(e){var a={};return e.find(".variations select").each(function(){var e,i;e="undefined"!=typeof t(this).data("attribute_name")?t(this).data("attribute_name"):t(this).attr("name"),i=t(this).val(),a[e]=i}),a}function x(e,a){var i=[];if(e.find(".cpf-type-variations").each(function(o,r){i[o]=!0;var n,c,d=t(r).find(".tm-epo-variation-element"),s=!1;d.is("select")?(n=d.attr("data-tm-for-variation").tmjid(),c=d.val(),c&&(i[o]=!1),d.children("option").each(function(a,i){s=!1,e.find("#"+n).children("option").each(function(){if(t(this).attr("value")==t(i).attr("value"))return s=!0,!1}),s?t(i).removeAttr("disabled").show():t(i).attr("disabled","disabled").hide()})):d.each(function(r,d){var d=t(d),s=d.closest("li"),p=s.find(".tm-epo-variation-element");n=d.attr("data-tm-for-variation"),c=d.val(),d.is(":checked")&&(i[o]=!1);var l=k(e);l["attribute_"+n]=c;var m=t.fn.tm_find_matching_variations(a,l),f=m.shift(),_=f&&"is_in_stock"in f&&f.is_in_stock;f&&_?(d.removeAttr("disabled").removeClass("tm-disabled"),s.removeClass("tm-attribute-disabled").fadeTo("fast",1,function(){t(this).css("opacity","")}),p.removeAttr("disabled"),p.removeAttr("data-tm-disabled")):(d.attr("disabled","disabled").addClass("tm-disabled"),p.attr("disabled","disabled"),p.attr("data-tm-disabled","disabled"),s.addClass("tm-attribute-disabled").fadeTo("fast",.5),_||s.find("label").off())})}),i){var o=(i.shift(),!0);t.each(i,function(t,e){if(e===!1)return o=!1,!1}),o&&e.find(".cpf-type-variations").first().each(function(e,a){var i=t(a).find(".tm-epo-variation-element");i.is("select")||i.each(function(e,a){var a=t(a),i=a.closest("li"),o=i.find(".tm-epo-variation-element");a.removeAttr("disabled").removeClass("tm-disabled"),i.removeClass("tm-attribute-disabled").stop().css("opacity",""),o.removeAttr("disabled"),o.removeAttr("data-tm-disabled")})})}}function j(e){var a=e.data("product_variations"),i=parseInt(e.data("product_id"));if(i||(i=e.data("tc_product_id")),!a&&window.product_variations&&window.product_variations.product_id&&(a=window.product_variations.product_id),!a&&window.product_variations&&(a=window.product_variations),!a&&window["product_variations_"+i]&&(a=window["product_variations_"+i]),a)x(e,a);else if(I)x(e,I.variations);else{var o={action:"woocommerce_tm_get_variations_array",post_id:i};t.post(tm_epo_js.ajax_url,o,function(t){I=t,x(e,I.variations)},"json")}}function q(e,a){if(void 0==a)return!1;var e=t(e),i=e.find(".tm-epo-variation-element"),o=i.closest(".tm-epo-variation-section");return i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+a+"</div>"),!0):(e.find(".tm-stock").remove(),e.find(".variations").after('<div class="tm-stock">'+a+"</div>"),!0)}function F(t,e){if("no"!=tm_epo_js.tm_epo_global_move_out_of_stock){var a=t.find(".woocommerce-variation-availability").last();a.length||(a=t.find(".stock").last()),a.length?(e.find(".tm-stock").remove(),q(e,a.prop("outerHTML"))&&a.remove()):e.find(".tm-stock").remove()}}function N(e,n,c,s){function p(e){e||(e=Et),e.find(".tm-range-picker").each(function(a,i){var i=t(i),o=i.attr("data-step").split("."),r=e.find("#"+i.attr("data-field-id").tmjid()),n=parseFloat(i.attr("data-min")),c=parseFloat(i.attr("data-max")),d=parseFloat(i.attr("data-start")),s=parseFloat(i.attr("data-step")),p=i.attr("data-show-picker-value"),l=i.closest("li").find(".tm-show-picker-value"),m=parseFloat(i.attr("data-noofpips")),f=null;o=1==o.length?0:o[1].length,isNaN(n)&&(n=0),isNaN(c)&&(c=0),c<=n&&c++,isNaN(d)&&(d=0),isNaN(s)&&(s=0),isNaN(m)&&(m=10),"yes"==i.attr("data-pips")&&(f={mode:"count",values:m,density:2,filter:function(t,e){return s<=0?0:t%1?2:1},stepped:!0,format:wNumb({decimals:o})}),noUiSlider.create(i.get(0),{direction:tm_epo_js.text_direction,start:d,step:s,connect:"lower",behaviour:"tap",format:wNumb({mark:".",decimals:o,thousand:""}),range:{min:[n],max:[c]},pips:f});var _=i.find(".noUi-handle-lower");i.get(0).noUiSlider.on("slide",function(){_.trigger("tmmovetooltip"),r.trigger("change.cpf")}),i.get(0).noUiSlider.on("update",function(t,e){e=0,"left"!=p&&"right"!=p&&_.attr("title",accounting.formatNumber(t[e],{decimal:z,thousand:D,precision:o})),r.val(t[e]).change(),""!=p&&l.html(accounting.formatNumber(t[e],{decimal:z,thousand:D,precision:o}))}),"left"!=p&&"right"!=p&&(_.attr("title",i.attr("data-start")),t.tm_tooltip(_)),""!=p&&l.html(d)})}function l(e){function a(e,a){a=t(a);var i=t.tm_datepicker._getInst(a[0]),o=a.data("tc-enabled_only_dates"),r=a.data("tc-disabled_weekdays"),n=a.data("tc-disabled_dates"),c=a.data("tc-format"),d=e.getDay();if(!t.tm_datepicker._isInRange(i,e))return!1;if(""!=o){var s=t.tm_datepicker.formatDate(c,e);return o.indexOf(s)!=-1}if(r.indexOf(d.toString())!=-1)return!1;if(""!=n){var s=t.tm_datepicker.formatDate(c,e);return n.indexOf(s)==-1}return!0}if(t.tm_datepicker){e||(e=Et);var i=t("input").map(function(){return this.id}).get().join(" ");e.find(".tm-epo-timepicker").each(function(e,a){var o=t(a),r=""!==o.attr("data-min-time").trim()?o.attr("data-min-time").trim():null,n=""!==o.attr("data-max-time").trim()?o.attr("data-max-time").trim():null,c=o.attr("data-time-format").trim(),d=o.attr("data-time-theme").trim(),s=o.attr("data-time-theme-size").trim(),p=o.attr("data-time-theme-position").trim(),l=o.attr("data-tranlation-hour").trim(),m=o.attr("data-tranlation-minute").trim(),f=o.attr("data-tranlation-second").trim();l||(l=tm_epo_js.hourText),m||(m=tm_epo_js.minuteText),f||(f=tm_epo_js.secondText),o.tm_timepicker({isRTL:tm_epo_js.isRTL,hourText:l,minuteText:m,secondText:f,timeFormat:c,minTime:r,maxTime:n,closeText:tm_epo_js.closeText,beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+d+" tm-timepicker tm-datepicker tm-datepicker-"+p+" tm-datepicker-"+s).appendTo("body"),G.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){o.tm_timepicker("hide")}),t("body").addClass("tm-static"),o.prop("readonly",!0),B.trigger({type:"tm-timepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),o.prop("readonly",!1),o.trigger("change")}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tm-epo-datepicker").each(function(a,o){var r=t(o),n=parseInt(r.attr("data-start-year").trim()),c=parseInt(r.attr("data-end-year").trim()),d=r.attr("data-min-date").trim(),s=r.attr("data-max-date").trim(),p=r.attr("data-disabled-dates").trim(),l=r.attr("data-enabled-only-dates").trim(),m=r.attr("data-disabled-weekdays").trim().split(","),f=r.attr("data-date-format").trim(),_=r.attr("data-date-showon").trim(),u=r.attr("data-date-theme").trim(),h=r.attr("data-date-theme-size").trim(),v=r.attr("data-date-theme-position").trim();if(""!=p){var g=p.split(","),b=p.indexOf(",");b!=-1&&g.length>0&&(p=g)}if(""!=l){var g=l.split(","),b=l.indexOf(",");b!=-1&&g.length>0&&(l=g)}d=""==d?""==n?null:new Date(n,0,1):d.tm_isNumeric()||isNaN(new Date(d).getTime())?d:new Date(d),s=""==s?""==c?null:new Date(c,11,31):s.tm_isNumeric()||isNaN(new Date(s).getTime())?s:new Date(s),r.data("tc-enabled_only_dates",l),r.data("tc-disabled_weekdays",m),r.data("tc-disabled_dates",p),r.data("tc-format",f),r.tm_datepicker({monthNames:tm_epo_js.monthNames,monthNamesShort:tm_epo_js.monthNamesShort,dayNames:tm_epo_js.dayNames,dayNamesShort:tm_epo_js.dayNamesShort,dayNamesMin:tm_epo_js.dayNamesMin,isRTL:tm_epo_js.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:_,buttonText:"",showButtonPanel:!0,firstDay:tm_epo_js.first_day,closeText:tm_epo_js.closeText,currentText:tm_epo_js.currentText,dateFormat:f,minDate:d,maxDate:s,onSelect:function(a,i){var o=t(this),r="#"+o.attr("id").tmjid(),n=o.attr("data-date-format"),c=o.tm_datepicker("getDate"),d="",s="",f="",_=e.find(r+"_day"),u=e.find(r+"_month"),h=e.find(r+"_year");if(c){d=c.getDate(),s=c.getMonth()+1,f=c.getFullYear();var v=t.tm_datepicker.formatDate(n,c);if(m.indexOf(c.getDay().toString())!=-1||p.indexOf(v)!=-1||""!=l&&l.indexOf(v)==-1){var g=o.data("tm-last-date");g=o.data("tm-last-date")?o.data("tm-last-date"):"",o.val(g),o.tm_datepicker("setDate",g),g?(c=o.tm_datepicker("getDate"),d=c.getDate(),s=c.getMonth()+1,f=c.getFullYear()):(d="",s="",f="")}}_.val(d),u.val(s),h.val(f),o.data("tm-last-date",o.val())},beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+u+" tm-datepicker tm-datepicker-"+v+" tm-datepicker-"+h).appendTo("body"),G.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){r.tm_datepicker("hide")}),t("body").addClass("tm-static"),r.prop("readonly",!0),B.trigger({type:"tm-datepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),r.prop("readonly",!1),r.trigger("change")},beforeShowDay:function(e){var a=e.getDay();if(""!=l){var i=t.tm_datepicker.formatDate(f,e);return[l.indexOf(i)!=-1,""]}if(m.indexOf(a.toString())!=-1)return[!1,""];if(""!=p){var i=t.tm_datepicker.formatDate(f,e);return[p.indexOf(i)==-1,""]}return[!0,""]}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tmcp-date-select").on("change.cpf",function(a){var i="#"+t(this).attr("data-tm-date").tmjid(),o=e.find(i),r=o.attr("data-date-format"),n=e.find(i+"_day").val(),c=e.find(i+"_month").val(),d=e.find(i+"_year").val(),s=t.tm_datepicker.formatDate(r,new Date(d,c-1,n));n>0&&c>0&&d>0?(o.tm_datepicker("setDate",s),o.trigger("change")):(o.val(""),o.trigger("change.cpf"))}).on("focus.cpf",function(i){var o="#"+t(this).attr("data-tm-date").tmjid(),r=e.find(o),n=e.find(o+"_day"),c=e.find(o+"_month"),d=e.find(o+"_year"),s=n.val(),p=c.val(),l=d.val();if(""!==l&&""!==p&&""!==s||""!==l&&""!==p&&""===s||""!==s&&""!==l&&""===p||""!==s&&""!==p&&""===l){var m=t(this);m.find("option").each(function(){var e=t(this),i=e.val(),o=l+"-"+p+"-"+s;if(m.is(".tmcp-date-day")){if(""===l||""===p)return;o=l+"-"+p+"-"+i}else if(m.is(".tmcp-date-month")){if(""===l||""===s)return;o=l+"-"+i+"-"+s}else if(m.is(".tmcp-date-year")){if(""===s||""===p)return;o=i+"-"+p+"-"+s}if(""!=i)try{var n=t.tm_datepicker.parseDate("yy-mm-dd",o);n&&(a(n,r)?e.prop("disabled",!1):e.prop("disabled",!0))}catch(t){e.prop("disabled",!0)}})}else n.find("option").prop("disabled",!1),c.find("option").prop("disabled",!1),d.find("option").prop("disabled",!1)}),t(window).on("resizestart",function(){var e=t(document.activeElement);if(e.is(".hasDatepicker")){if(e.data("resizestarted",!0),t(window).width()<768)return void e.data("resizewidth",!0);e.tm_datepicker("hide")}}),t(window).on("resizestop",function(){var e=t(document.activeElement);e.is(".hasDatepicker")&&e.data("resizestarted")&&(e.data("resizewidth")&&e.tm_datepicker("hide"),e.tm_datepicker("show")),e.data("resizestarted",!1),e.data("resizewidth",!1)})}}function m(){G.on("click.cpfurl change.cpfurl tmredirect",".use_url_containter .tmcp-radio, .use_url_containter .tmcp-radio+label",function(e){var a=t(this).attr("data-url");a&&window.location!=a&&(e.preventDefault(),window.location=a)}),G.on("change.cpfurl tmredirect",".use_url_containter .tmcp-select",function(e){var a=t(this).children("option:selected"),i=a.attr("data-url");i&&window.location!=i&&(e.preventDefault(),window.location=i)})}function u(a){if("yes"==tm_epo_js.tm_epo_global_enable_validation){var i={};Et.find(".tmcp-ul-wrap").each(function(e,a){a=t(a);var o=a.data("tm-validation");if(o&&"object"===t.tmType(o)){var r=a.find(".tm-epo-field"),n=r.first().attr("name");a.is(".tm-extra-product-options-radio.tm-element-ul-radio")&&(n=r.last().attr("name")),a.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?r.each(function(e,n){"required"in o&&(o.required=function(e){var i=a.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0==i?r.last().attr("name")==t(e).attr("name"):i<=0}),i[t(n).attr("name")]=o}):i[n]=o}}),a.removeData("tc_validator");a.tc_validate({focusInvalid:!1,ignore:"input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select",rules:i,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return e.is(".tm-epo-field.tmcp-radio")?t.appendTo(e.closest(".tmcp-ul-wrap").find(".tmcp-field-wrap").last()):t.appendTo(e.closest(".tmcp-field-wrap")),!1},invalidHandler:function(a,i){setTimeout(function(){e.find(E).first().removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),i.errorList&&i.errorList[0]&&i.errorList[0].element&&at(t(i.errorList[0].element))},submitHandler:function(t){return e.find(E).first().attr("disabled","disabled"),w()}});return!0}return!1}function h(){var t=q();!u(t)&&Dt.length&&t.on("submit",w)}function w(t){for(var a=!0,i=0;i<Dt.length;i++){var o=Dt[i],r=typeof o;if("object"==r){var n="function"==typeof o.trigger||!1;if(n&&!o.trigger()){a=!1;break}}}for(var i=0;i<Dt.length;i++){var o=Dt[i],r=typeof o;"object"==r&&(a?o.on_true():o.on_false())}return a||setTimeout(function(){e.find(E).first().removeAttr("disabled")},100),a}function k(){if(!n&&tm_epo_js.floating_totals_box&&"disable"!=tm_epo_js.floating_totals_box&&Ct&&Ut.length){var e,a=t('<div class="tm-floating-box '+tm_epo_js.floating_totals_box+'"></div>'),i=!1,o=t(".tm-floating-box-nks"),r=t(".tm-floating-box-alt"),c=!1;o.length>0?(i=!0,a.removeClass("top left right bottom").appendTo(o).show()):r.length>0?a.removeClass("top left right bottom").appendTo(r).hide():a.appendTo("body").hide(),(o.length>0||r.length>0)&&(c=!0);var d=function(){return"always"==tm_epo_js.floating_totals_box_visibility?void a.show():void(t(window).scrollTop()>100||c?a.is(":hidden")&&!a.is(":empty")||c?i?a.show():a.fadeIn():!a.is(":hidden")&&a.is(":empty")&&(i?a.hide():a.fadeOut()):a.is(":hidden")||(i?a.hide():a.fadeOut()))},s=function(){var o=Ut.data("tm-html"),r=Ut.data("tm-floating-box-data"),n=[];if(r&&r.length&&t.each(r,function(e,a){""==a.title&&(a.title="&nbsp;"),""==a.value&&(a.value="&nbsp;"),a.title?(a.title=t("<div>"+a.title+"</div>"),a.title.find("span").remove(),a.title=a.title.html()):a.title="&nbsp;",i&&(""!=a.label_show&&(a.title=""),""!=a.value_show&&(a.value="")),n.push({label_show:a.label_show,value_show:a.value_show,title:a.title,value:a.value,quantity:a.quantity,price:b(a.price,Ut,!0,!1)})}),o&&""!=o||i?d():(o="",a.hide()),n&&!n.length&&n.push({label_show:"hidden",value_show:"hidden",title:"",value:"",quantity:0,price:0}),e=t.fn.tm_template(c?Q.tc_floating_box_nks:Q.tc_floating_box,{html_before:tm_epo_js.floating_totals_box_html_before,html_after:tm_epo_js.floating_totals_box_html_after,option_label:tm_epo_js.i18n_option_label,option_value:tm_epo_js.i18n_option_value,option_qty:tm_epo_js.i18n_option_qty,option_price:tm_epo_js.i18n_option_price,values:n,totals:o}),a.html(e),d(),"yes"==tm_epo_js.floating_totals_box_add_button){var s=Ct.find(E).first();s.tm_clone().addClass(".tc-add-to-cart-button").on("click",function(){s.click()}).appendTo(a)}};s(),Ct.on("tm-epo-after-update",function(){s()}),i||(d(),"always"==tm_epo_js.floating_totals_box_visibility&&t(window).on("scroll",function(){d()}))}}function x(t,e,a){return q(t,e,a)}function q(t,e,a){return e||(e="form"),N(t,a).closest(e)}function N(t,a){var i="";a&&(i=i+'[value="'+a+'"]'),t||(t=e);var o=t.find(P+i);return 0==o.length&&(o=t.find(R+i)),o.last()}function C(){G.tcready(function(){T()}),B.trigger("tm-epo-compatibility",{epo:{form:q(),main_cart:Ct,main_epo_inside_form:Tt,product_id_selector:Pt,epo_id_selector:Rt,product_id:c,this_epo_container:Et,this_totals_container:Ht,this_epo_totals_container:Ut}})}function T(){var e=q(),a=e.find(".wc-bookings-booking-form"),i=a.find(".tm-epo-counter");if(i.length>0){e.on("submit",function(){e.find(E).first().addClass("disabled")}),"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&t(".wc-bookings-booking-form-button").before(Ht),Ut.data("tc_is_bookings",1),Ut.data("bookings_form",a),Ut.data("bookings_form_init",0),Ut.data("price",0),Ht.find(".cpf-product-price").val(0);for(var o=findEventHandlers("change",i),r=!1,n=!1,d=o.length-1;d>=0&&n!==!0;d--)if(o[d].events)for(var p=o[d].events.length-1;p>=0;p--)if(o[d].events[p].selector&&"input, select"==o[d].events[p].selector){r=o[d].events[p].handler,n=!0;break}if(G.ajaxSuccess(function(t,e,a){if(a.data&&e&&e.responseText){var i=a.data.tmparseParams();i.action&&"wc_bookings_get_blocks"==i.action&&(Ut.data("price",0),Ht.find(".cpf-product-price").val(0),Ct.trigger({type:"tm-epo-update",product_false:!0}))}}),r!==!1&&n){var l=i.closest(".wc-bookings-booking-form");l.off("change","input, select",r).on("change.tcbookings","input, select",function(a){var i=t(this),o=t(this).closest("form"),r=o.find("input.required_for_calculation"),n=!0;if(t.each(r,function(e,a){var i=t(a).val();i||(n=!1)}),n){if(u(e)&&!e.tc_validate().form())return void a.stopImmediatePropagation();a.stopImmediatePropagation();var d={action:"tc_epo_bookings_calculate_costs",form:o.serialize(),post_id:c};t.post(tm_epo_js.ajax_url,d,function(t){t&&"SUCCESS"==t.result&&"product_price"in t?(Ut.data("price",t.product_price),Ht.find(".cpf-product-price").val(t.product_price),Ut.data("bookings_form_init",1),Ct.trigger({type:"tm-epo-update"}),i.trigger("tc_bookings_change")):t&&"ERROR"==t.result&&(Ut.data("bookings_form_init",0),o.find(".wc-bookings-booking-cost").show().html(t.html))},"json")}}),l.on("change tc_bookings_change","input, select",r)}}Tt||i.length>0&&(Et.find(".tm-epo-field").not(".tm-epo-counter").off("change.tcbookings").on("change.tcbookings",function(t){i.trigger("change")}),t.ajaxPrefilter(function(e,a,i){if("post"===e.type.toLowerCase()&&a.data&&a.data.action&&"wc_bookings_calculate_costs"==a.data.action&&a.data.form){var o=t(L+".tm-cart-main.tm-product-id-"+c+'[data-epo-id="'+s+'"]');if(1==o.length){var r=a.data.form.tmparseParams(!0);r=t.extend(r,o.tm_aserializeObject()),a.data.form=t.param(r,!1),e.data=t.param(t.extend(a.data,{}),!1)}}}))}function I(){Ct||(Ct=x(e,"form",c));var a=q(),i=a.find(L+".tm-cart-main").length,o=a.find(".tm-totals-form-main").length;i>0&&(Tt=!0),o>0&&(zt=!0),zt||(Dt[Dt.length]={trigger:function(){return!0},on_true:function(){var e=t(".tc-totals-form.tm-totals-form-main.tm-product-id-"+c+'[data-epo-id="'+s+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo-normal"></div>');return a.find(".tm-formepo-normal").remove(),i.append(e),a.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}}),Tt||(Dt[Dt.length]={trigger:function(){return!0},on_true:function(){var e=t(L+".tm-cart-main.tm-product-id-"+c+'[data-epo-id="'+s+'"]').tm_clone(),i=t(".tc-totals-form.tm-totals-form-main.tm-product-id-"+c+'[data-epo-id="'+s+'"]').tm_clone(),o=t('<div class="tm-hidden tm-formepo"></div>');return a.find(".tm-formepo").remove(),o.append(e),o.append(i),a.append(o),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}})}function Y(){if(Ot&&"yes"==tm_epo_js.tm_epo_hide_add_cart_button){var t=e.find(E).first();Mt?t.removeClass("tc-hide-add-to-cart-button"):t.addClass("tc-hide-add-to-cart-button")}}function V(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return!(o>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this),a=e.closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?(i=parseInt(a.val()),i<=0&&(i=1),r+=i):r+=1}),r>o))||(a&&e.prop("checked","").trigger("change"),!1)}function $(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return o=parseInt(e.attr("data-exactlimit")),!(o>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this),a=e.closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?(i=parseInt(a.val()),i<=0&&(i=1),r+=i):r+=1}),r>o))||(a&&e.prop("checked","").trigger("change"),!1)}function J(a){var o=!0,r=!1;return a.each(function(){var a=t(this).find("[type='checkbox'][data-exactlimit]");if(a.length&&i(a)){var n=parseInt(a.attr("data-exactlimit")),c=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this),i=a.closest("li.tmcp-field-wrap").find("input.tm-qty");i.length>0?(e=parseInt(i.val()),e<=0&&(e=1),c+=e):c+=1});var d=t(this).closest(".cpf_hide_element"),s=d.find("div.tm-error-min");if(n!==c){o=!1,r=t(this);var p=tm_epo_js.tm_epo_global_validator_messages.epoexact.replace("{0}",n);s.length&&s.remove(),t(this).after('<div class="tm-error-min tm-error">'+p+"</div>"),e.find(E).first().removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled")}else s.remove()}}),r&&(It=r),o}function K(e){Dt[Dt.length]={trigger:function(){var t=J(e);return t},on_true:function(){return!0},on_false:function(){return at(t(e).find(".tm-epo-field").first()),!0}}}function tt(e){var a=!0,o=!1;return e.each(function(){var e=t(this).find("[type='checkbox'][data-minimumlimit]");if(e.length&&i(e)){var r=parseInt(e.attr("data-minimumlimit")),n=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this),i=a.closest("li.tmcp-field-wrap").find("input.tm-qty");i.length>0?(e=parseInt(i.val()),e<=0&&(e=1),n+=e):n+=1});var c=t(this).closest(".cpf_hide_element"),d=c.find("div.tm-error-min");if(r>n){a=!1,o=t(this);var s=tm_epo_js.tm_epo_global_validator_messages.epomin.replace("{0}",r);d.length&&d.remove(),t(this).after('<div class="tm-error-min tm-error">'+s+"</div>")}else d.remove()}}),o&&(It=o),a}function et(t){
Dt[Dt.length]={trigger:function(){var e=tt(t);return e},on_true:function(){return!0},on_false:function(){return at(),!0}}}function at(e){var a=It||e;if(a){var i=a.closest(".cpf-section"),o=i.find(".tm-section-link"),r=a.closest(".cpf_hide_element");if(i.find(".tm-toggle").length&&i.find(".tm-toggle").trigger("openwrap.tmtoggle"),window.tc_validation_offset||(window.tc_validation_offset=-100),i.is(".section_popup"))t(window).tc_scrollTo(o,300,window.tc_validation_offset),o.trigger("click.tmsectionpoplink");else if(i.is(".tm-owl-slider-section")){var n=a.closest(".owl-item").index();i.find(".owl-carousel").trigger("to.owl.carousel",[n,100]),setTimeout(function(){i.find(".owl-carousel").trigger("refresh.owl.carousel"),r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset)},200)}else r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset);e||(It=!1)}}function it(){Ut.each(function(){var a=t(this).attr("data-cart-id"),i=e.find(".tm-extra-product-options.tm-cart-"+a),o=t(this).data("subscription-period"),r=t(this).data("variations-subscription-period"),n=i.find(".tmcp-field").closest(".tmcp-field-wrap"),c=t(this).data("is-subscription");if(c){n.find(".tmperiod").remove();var d=n.find(".amount").is(".hidden");d=d?" hidden":"";var s='input[name^="variation_id"]',p=t(this).data("tm_for_cart");if(p){p.find("input.variation_id").length>0&&(s="input.variation_id");var l=p.find(s).val();l||(l=0),r[l]&&(o=r[l])}void 0===window.subscription_period_separator&&(window.subscription_period_separator=" / "),n.find(".amount").after('<span class="tmperiod'+d+'">'+window.subscription_period_separator+o+"</span>"),t(this).find(".tmperiod").remove(),t(this).find(".amount.options").after('<span class="tmperiod">'+window.subscription_period_separator+o+"</span>"),t(this).find(".amount.final").after('<span class="tmperiod">'+window.subscription_period_separator+o+"</span>")}})}function ot(e){var a=e.attr("data-container-id");if(!a)var i=t(e).closest(".composite_form"),a=i.find(".composite_data").data("container_id");return a}function rt(t){var a=e.find(".bto_form_"+t+",#composite_form_"+t+",#composite_data_"+t).data("price_data");return a}function nt(t){return" .review .price_"+t+", .summary_element_"+t+" .summary_element_price"}function ct(t){return t.attr("data-item-id")||t.attr("data-item_id")}function dt(e,a,i){if("object"==typeof a&&(a=a[0],isNaN(parseFloat(a))&&(a=0)),1!=i)return a;var o=e.data("product-price-rules"),r=e.data("tm_for_cart");if(!o||!r)return a;var n='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(n="input.variation_id");var c=r.find("input.qty").last(),d=parseFloat(c.val()),s=r.find(n).val();return s||(s=0),isNaN(d)&&(e.attr("data-is-sold-individually")||0==c.length)&&(d=1),(o[s]&&0!=s||o[0])&&(o[s]||(s=0),t(o[s]).each(function(t,e){var i=parseFloat(e.min),o=parseFloat(e.max),r=e.type,n=parseFloat(e.value);if(void 0==a&&(a=0),i<=d&&d<=o)switch(r){case"percentage":return a*=1-n/100,!1;case"price":return a-=n,!1;case"fixed":return a=n,!1}})),a}function st(e,a){if(1!=a)return!1;var i=[!1,!1],o=e.data("product-price-rules"),r=e.data("tm_for_cart");if(!o||!r)return!1;var n='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(n="input.variation_id");var c=r.find("input.qty").last(),d=parseFloat(c.val()),s=r.find(n).val();return s||(s=0),isNaN(d)&&(e.attr("data-is-sold-individually")||0==c.length)&&(d=1),(o[s]&&0!=s||o[0])&&(o[s]||(s=0),t(o[s]).each(function(t,e){var a=parseFloat(e.min),o=parseFloat(e.max),r=e.type,n=parseFloat(e.value);if(a<=d&&d<=o)switch(r){case"percentage":return i=[n,r],!1;case"price":return i=[n,r],!1;case"fixed":return i=[n,r],!1}})),i}function pt(e){var i=e.data("product-price-rules"),o=parseFloat(e.data("price")),r=e.data("tm_for_cart");if(!i||!r)return o;var n=e.data("qty_element"),c=parseFloat(n.val()),d=e.data("variation_id_selector").val();return d||(d=0),i[d]||(d=0),isNaN(c)&&(e.attr("data-is-sold-individually")||0==n.length)&&(c=1),(i[d]&&0!=d||i[0])&&(i[d]||(d=0),t(i[d]).each(function(t,e){var i=parseFloat(e.min),r=parseFloat(e.max),n=e.type,d=parseFloat(e.value);if(i<=c&&c<=r){var s=parseInt(tm_epo_js.currency_format_num_decimals);switch(n){case"percentage":return o-=Math.ceil(o*(d/100)*Math.pow(10,s)-.5)*Math.pow(10,-s),o=a(o,s),o<0&&(o=0),!1;case"price":return o-=d,o=Math.ceil(o*Math.pow(10,s)-.5)*Math.pow(10,-s),o=a(o,s),o<0&&(o=0),!1;case"fixed":return o=d,o=Math.ceil(o*Math.pow(10,s)-.5)*Math.pow(10,-s),o=a(o,s),o<0&&(o=0),!1}}})),o}function lt(a,i){var o,r,n,c,d,s,p,l=t(a),m=l,f=!0,_=l.is(".tmcp-range");if(i)o=i.bto,r=i.cart,n=i.current_variation,c=i.is_bto,d=i.bundleid,s=i.totals,p=i.apply_dpd;else{o=l.closest(St),r=l.closest(".cart");var u='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(u="input.variation_id"),n=r.find(u).val(),c=o.length>0,d=r.attr("data-product_id"),d||(d=r.closest(".component_content").attr("data-product_id"),d||(d=0)),n||(n=0),s=c?e.find(".tm-epo-totals.tm-cart-"+d):Ut,p=s.data("fields-price-rules")}l.is("select")&&(m=l.find("option:selected"));var h,g,w,k,x,j,q,F,N,C=m.data("rules"),T=m.data("rulestype"),z=m.data("original-rules");if(void 0==z&&(z=C),c){var D=r.find(".cpf-bto-price");D.length>0&&(D.data("per_product_pricing")?N=D.val():(N=0,f=!1),D.val(N))}else s.length&&(N=pt(s));if(f!==!1)if(k="","object"==typeof C){switch(n in C?(x=C[n],j=z[n]):(h=l.closest(".tmcp-ul-wrap").data("rules"),w=l.closest(".tmcp-ul-wrap").data("original-rules"),x="object"==typeof h&&n in h?h[n]:C[0],j="object"==typeof w&&n in w?w[n]:z[0]),"object"==typeof T?n in T?k=T[n]:(g=l.closest(".tmcp-ul-wrap").data("rulestype"),k="object"==typeof g&&n in g?g[n]:T[0]):(T=l.closest(".tmcp-ul-wrap").data("rulestype"),"object"==typeof T&&(k=n in T?T[n]:T[0])),"object"==typeof k&&(k=k[0]),l.is("select")?l.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(m.removeData("tm-price-for-late"),m.removeData("islate"),m.removeClass("tm-epo-late-field")),"fee"==k&&(p=0),k){case"":case"fee":x=dt(s,x,p),j=dt(s,j,p);break;case"percent":x=x/100*N,j=j/100*N;break;case"percentcurrenttotal":Wt.push({setter:m,price:x,bundleid:d}),m.data("tm-price-for-late",x).data("islate",1).addClass("tm-epo-late-field"),x=0,j=0;break;case"char":x=dt(s,x,p)*m.val().length,j=dt(s,j,p)*m.val().length;break;case"charpercent":x=x/100*N*m.val().length,j=j/100*N*m.val().length;break;case"charnospaces":x=dt(s,x,p)*m.val().replace(/\s/g,"").length,j=dt(s,j,p)*m.val().replace(/\s/g,"").length;break;case"charnofirst":var I=m.val().length-1;I<0&&(I=0),x=dt(s,x,p)*I,j=dt(s,j,p)*I;break;case"charnon":var O=parseInt(m.attr("data-freechars"));isNaN(O)&&(O=0);var I=m.val().length-O;I<0&&(I=0),x=dt(s,x,p)*I,j=dt(s,j,p)*I;break;case"charpercentnon":var O=parseInt(m.attr("data-freechars"));isNaN(O)&&(O=0);var I=m.val().length-O;I<0&&(I=0),x=x/100*N*I,j=j/100*N*I;break;case"charnonnospaces":var O=parseInt(m.attr("data-freechars"));isNaN(O)&&(O=0);var I=m.val().replace(/\s/g,"").length-O;I<0&&(I=0),x=dt(s,x,p)*I,j=dt(s,j,p)*I;break;case"charpercentnonnospaces":var O=parseInt(m.attr("data-freechars"));isNaN(O)&&(O=0);var I=m.val().replace(/\s/g,"").length-O;I<0&&(I=0),x=x/100*N*I,j=j/100*N*I;break;case"charpercentnofirst":var I=m.val().length-1;I<0&&(I=0),x=x/100*N*I,j=j/100*N*I;break;case"step":case"stepfee":_?(x=dt(s,x,p)*m.val(),j=dt(s,j,p)*m.val()):(x=dt(s,x,p)*m.val().tmtoFloat(),j=dt(s,j,p)*m.val().tmtoFloat());break;case"currentstep":case"currentstepfee":_?(x=dt(s,m.val(),p),j=dt(s,m.val(),p)):(x=dt(s,m.val().tmtoFloat(),p),j=dt(s,m.val().tmtoFloat(),p));break;case"intervalstep":if(_){var S=parseFloat(t('.tm-range-picker[data-field-id="'+m.attr("id")+'"]').attr("data-min"));x=dt(s,x,p)*(m.val()-S),j=dt(s,j,p)*(m.val()-S)}break;case"row":x=dt(s,x,p)*((m.val().match(new RegExp("\n","g"))||[]).length+1),j=dt(s,j,p)*((m.val().match(new RegExp("\n","g"))||[]).length+1)}l.data("tm-quantity")&&(x*=parseFloat(l.data("tm-quantity")),j*=parseFloat(l.data("tm-quantity"))),q=b(x,s,!1,!1,m),F=b(j,s,!1,!1,m),m.data("price",v(x,s,m)),m.data("original_price",v(j,s,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),x,q,j,F)}else{var M=l.closest(".tmcp-ul-wrap");if(C=M.data("rules"),z=M.data("original-rules"),"object"==typeof C){switch(x=n in C?C[n]:C[0],j="object"==typeof z?n in z?z[n]:z[0]:x,"object"==typeof T?n in T?k=T[n]:(g=M.data("rulestype"),k="object"==typeof g&&n in g?g[n]:T[0]):(T=M.data("rulestype"),"object"==typeof T&&(k=n in T?T[n]:T[0])),"object"==typeof k&&(k=k[0]),l.is("select")?l.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(m.removeData("tm-price-for-late"),m.removeData("islate"),m.removeClass("tm-epo-late-field")),k){case"":case"fee":x=dt(s,x,p),j=dt(s,j,p);break;case"percent":x=x/100*N,j=j/100*N;break;case"percentcurrenttotal":Wt.push({setter:m,price:x,bundleid:d}),m.data("tm-price-for-late",x).data("islate",1).addClass("tm-epo-late-field"),x=0,j=0;break;case"char":x=dt(s,x,p)*m.val().length,j=dt(s,j,p)*m.val().length;break;case"charpercent":x=x/100*N*m.val().length,j=j/100*N*m.val().length;break;case"step":case"stepfee":_?(x=dt(s,x,p)*m.val(),j=dt(s,j,p)*m.val()):(x=dt(s,x,p)*m.val().tmtoFloat(),j=dt(s,j,p)*m.val().tmtoFloat());break;case"currentstep":case"currentstepfee":_?(x=dt(s,m.val(),p),j=dt(s,m.val(),p)):(x=dt(s,m.val().tmtoFloat(),p),j=dt(s,m.val().tmtoFloat(),p));break;case"intervalstep":if(_){var S=parseFloat(t('.tm-range-picker[data-field-id="'+m.attr("id")+'"]').attr("data-min"));x=dt(s,x,p)*(m.val()-S),j=dt(s,j,p)*(m.val()-S)}}l.data("tm-quantity")&&(x*=parseFloat(l.data("tm-quantity")),j*=parseFloat(l.data("tm-quantity"))),q=b(x,s,!1,!1,m),F=b(j,s,!1,!1,m),m.data("price",v(x,s,m)),m.data("original_price",v(j,s,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),x,q,j,F)}}}function mt(a){Wt=[];var i;i=a?a:e.find(".cart"),!i.length>0||i.each(function(a,i){i=t(i);var r='input[name^="variation_id"]';i.find("input.variation_id").length>0&&(r="input.variation_id");var n=!0,c=t(this).closest(St),d=i.find(r).val(),s=!1,p=i.attr("data-product_id");if(p||(p=i.closest(".component_content").attr("data-product_id"),p||(p=0)),c.length>0){s=!0;var l=ot(c),m=rt(l);m&&(n=o(m))}d||(d=0);var f;if(s){f=e.find(".tm-extra-product-options.tm-cart-"+p);var _=e.find(".tm-epo-totals.tm-cart-"+p)}else{f=Et;var _=Ut}var u=_.data("fields-price-rules");if(f.data("tm_rules_init_done")||(_.data("force-quantity")&&i.find("input.qty").val(_.data("force-quantity")),f.find(".tm-quantity .tm-qty").each(function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field");a.data("tm-quantity",e.val())}),f.find(".tmcp-attributes, .tmcp-elements").each(function(e,a){var a=t(a),i=a.data("rules"),o=a.data("original-rules");if("object"!=typeof i&&(i={0:"0"}),"object"!=typeof o&&(o={0:"0"}),"object"==typeof i){var r=dt(_,i[d],u),c=b(r,_),s=dt(_,o[d],u),p=b(s,_);a.find(".tmcp-field").each(function(e,a){var i=t(a);n?(i.data("price",v(r,_,i)),i.data("original_price",v(s,_,i)),y(i.closest(".tmcp-field-wrap").find(".tc-price"),r,c,s,p)):(i.data("price",0),i.data("original_price",0),i.closest(".tmcp-field-wrap").find(".amount").empty())})}}),f.data("tm_rules_init_done",1)),!n)return!0;var h={bto:c,cart:i,current_variation:d,is_bto:s,bundleid:p,totals:_,apply_dpd:u};f.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field").each(function(t,e){lt(e,h)})})}function ft(e){return t(e).find(".single_variation .price,.bundle_price .price,.bto_item_wrap .price,.component_wrap .price,.composite_wrap .price").not(".tc-price")}function _t(a,o){function r(e,a){var i,o=t(this),r=l.data("variations"),n=l.data("variations-subscription-sign-up-fee"),c=l.data("variations-subscription-period");r&&a&&a.variation_id&&n[a.variation_id]&&l.data("subscription-sign-up-fee",n[a.variation_id]),r&&a&&a.variation_id&&c[a.variation_id]&&l.data("subscription-period",c[a.variation_id]),r&&a&&a.variation_id&&void 0!==r[a.variation_id]?(i=r[a.variation_id],l.data("price",i)):a&&t(a.price_html).find(".amount:last").length&&(i=t(a.price_html).find(".amount:last").text(),i=i.replace(tm_epo_js.currency_format_thousand_sep,""),i=i.replace(tm_epo_js.currency_format_decimal_sep,"."),i=i.replace(/[^0-9\.]/g,""),i=parseFloat(i),l.data("price",i)),p.find(".cpf-product-price").val(i),o.data("tm_variations_did_init",!0),o.data("tm-styled-variations")||m.trigger({type:"tm-epo-update"})}var n,d,p,l,m,f="main";a?(n=ot(a),f=ct(a),f||(f=a.attr("data-item_id")),d=e.find(".tm-extra-product-options.tm-cart-"+f),p=e.find(".tm-totals-form-"+f),l=e.find(".tm-epo-totals.tm-cart-"+f)):(Ct&&0!=Ct.length||(Ct=Et.is(".tc-shortcode")?e:x(e,"form",c)),a=Ct.parent(),d=Et,p=Ht,l=Ut),m=o||Ct,l.data("tm_for_cart",m);var _='input[name^="variation_id"]';m.find("input.variation_id").length>0&&(_="input.variation_id"),l.data("variation_id_selector",m.find(_)),l.data("qty_element",m.find("input.qty").last());var u=l.data("type"),h=a.find(".variations_form");h.data("tc_product_id",c),d.off("focus.cpf",".tm-quantity .tm-qty").on("focus.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=V(a,!1),d=$(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?e.data("tm-prev-value",i):e.data("tm-prev-value",r)}).off("change.cpf",".tm-quantity .tm-qty").on("change.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=V(a,!1),d=$(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?a.data("tm-quantity",e.val()).trigger("change.cpf"):e.data("tm-prev-value")?e.val(e.data("tm-prev-value")):e.val(r)}).off("tmaddquantity",".tm-quantity .tm-qty").on("tmaddquantity",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field");a.data("tm-quantity",e.val())}),d.find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(a){var i=t(this),o=i.attr("data-tm-for-variation").tmjid(),r="",n=i.closest(".cpf-type-variations"),c=i.closest(".cpf_hide_element").find(".tm-epo-variation-element");c.removeAttr("checked").prop("checked",!1),h.find("#"+o).val(r).change(),h.find("#"+o).trigger("focusin"),e.find(".cpf-type-variations").not(n).each(function(e,a){h.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),h.trigger("woocommerce_update_variation_values_tmlogic")}),d.find("input.tm-epo-variation-element,input.tm-epo-variation-element + label").off("mouseup.cpfv").on("mouseup.cpfv",function(e){var a=t(this);a.is("label")&&(a=a.prev("input")),a.attr("disabled")&&h.find(".reset_variations").trigger("click");var i=a.attr("data-tm-for-variation").tmjid();h.find("#"+i).trigger("focusin")}),d.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(a){var i=t(this),o=i.attr("data-tm-for-variation").tmjid(),r=i.val(),n=i.closest(".cpf-type-variations"),c=h.find("#"+o);if(a&&a.type&&"tm_epo_variation_element_change"==a.type);else{var d=!1;c.each(function(){if(this.value==r)return d=!0,!1}),d||c.trigger("focusin"),c.val(r).change()}r||c.trigger("focusin"),e.find(".cpf-type-variations").not(n).each(function(e,a){h.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),h.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){if(t(this).is("select")){var e=t(this),a=e.attr("data-tm-for-variation").tmjid();h.find("#"+a).trigger("focusin"),h.trigger("woocommerce_update_variation_values_tmlogic")}}),d.find("select.tm-epo-field").off("tm-select-change-html").on("tm-select-change-html",function(){if(!o||!Ct||void 0==Ct.data("per_product_pricing")||Ct.data("per_product_pricing")){var e=t(this),a=b(e.find("option:selected").data("price"),l,!1,!1,e),i=b(e.find("option:selected").data("original_price"),l,!1,!1,e);y(e.closest(".tmcp-field-wrap").find(".tc-price"),e.find("option:selected").data("price"),a,e.find("option:selected").data("original_price"),i);var r=e.closest(".tmcp-field-wrap").find(".tc-tooltip");r.length>0&&r.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed")}}).off("tm-select-change").on("tm-select-change",function(){o&&Ct&&void 0!=Ct.data("per_product_pricing")&&!Ct.data("per_product_pricing")||(t(this).trigger("tm-select-change-html"),m.trigger({type:"tm-epo-update",norules:1,element:t(this)}))}),d.find("select.tm-epo-field").trigger("tm-select-change-html"),d.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").each(function(){var e=t(this),a=t.fn.tm_template(Q.tc_chars_remanining,{maxlength:e.attr("maxlength"),characters_remaining:tm_epo_js.i18n_characters_remaining});e.after(t(a))}),d.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").off("change.tc_maxlen keyup.tc_maxlen").on("change.tc_maxlen keyup.tc_maxlen",function(e){var a=t(this);a.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(a.attr("maxlength"))-parseInt(a.val().length))}),d.find(".tm-epo-field").off("tm_trigger_product_image").on("tm_trigger_product_image",function(a){var i=t(this),o=t(this);if(o.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")){var r=o.closest(".tmcp-field-wrap").find("label img"),n=o.closest(".cpf-section"),c=n.is(".tm-epo-variation-section");if(o.is("select.tm-product-image")&&(i=o.children("option:selected")),t(r).length>0||c&&void 0!=i.attr("data-image")||void 0!=i.attr("data-image")&&""!=i.attr("data-image")||void 0!=i.attr("data-imagep")&&""!=i.attr("data-imagep"))if(o.is(":checked")||o.is("select.tm-product-image")&&""!=o.val()&&(""!=o.find("option:selected").attr("data-rules")||o.is(".tm-epo-variation-element"))){var s=t(r).first().attr("data-original");s||c||(s=t(r).first().attr("src")),s||(s=i.attr("data-image")),i.attr("data-imagep")&&(s=i.attr("data-imagep")),s?e.trigger("tm_change_product_image",{src:s,element:o,main_product:e,epo_holder:d}):e.trigger("tm_change_product_image",{src:!1,element:o,main_product:e,epo_holder:d})}else e.trigger("tm_restore_product_image",{element:o,main_product:e,epo_holder:d});else e.trigger("tm_restore_product_image",{element:o,main_product:e,epo_holder:d})}else e.trigger("tm_attempt_product_image",{element:o,main_product:e,epo_holder:d})}),d.find(".tm-quantity").off("showhide.cpfcustom").on("showhide.cpfcustom",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=!1;if(!i.is(".tm-epo-variation-element")){if(i.is("select"))""!==i.val()&&(o=!0);else if(i.is(":checkbox"))i.is(":checked")&&(o=!0);else if(i.is(":radio")){if(i.is(":checked")&&(o=!0,"yes"==tm_epo_js.tm_epo_show_only_active_quantities)){var r=i.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio");r.each(function(){t(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()})}}else i.val()&&(o=!0);o?("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.show(),a.find(".tm-qty").removeClass("ignore")):("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.hide(),a.find(".tm-qty").addClass("ignore"))}}),d.find(".tm-quantity").trigger("showhide.cpfcustom"),d.find(".tm-epo-field").off("change.cpfcustom").on("change.cpfcustom",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap").find(".tm-quantity");i.trigger("showhide.cpfcustom")}),d.find(".tm-epo-field").off("change.cpf").on("change.cpf",function(a){var i=t(this);if(!i.is(".tm-epo-variation-element")){if(i.is(".use_images:checkbox, .use_images:radio")&&i.attr("data-imagec")){var o=i.closest(".tmcp-field-wrap").find(".radio_image,.checkbox_image").first();o.length>0&&(i.is(":checked")?o.prop("src",i.attr("data-imagec")):o.prop("src",i.attr("data-image")))}i.is(".use_images:radio")&&i.closest(".cpf-type-radio").find(".use_images:radio").not(i).each(function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".radio_image").first().prop("src",e.attr("data-image"))}),i.is(".tmcp-range")&&i.trigger("change.cpflogic"),i.is("select")?i.trigger("tm-select-change"):(i.is(".tmcp-radio")&&i.closest(".cpf-type-radio").find(".tm-quantity .tm-qty").each(function(){t(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?t(this).removeAttr("disabled"):t(this).attr("disabled","disabled")}),m.trigger({type:"tm-epo-update",norules:1,element:i}))}i.trigger("tm_trigger_product_image"),e.trigger("tm_attempt_product_image",{element:i,main_product:e,epo_holder:d})}),d.find(".tm-epo-reset-radio").off("click.cpf").on("click.cpf",function(){var e=t(this),a=e.closest(".cpf_hide_element"),i=a.find(".tm-epo-field.tmcp-radio:checked");i.length&&(i.removeAttr("checked").prop("checked",!1),i.trigger("change.cpf"),i.trigger("change.cpflogic"))}),d.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield").off("keyup.cpf").on("keyup.cpf",function(){t(this).trigger("change.cpf")}),d.find(".tm-epo-field.tmcp-upload").off("change.cpfv").on("change.cpfv",function(){var e=t(this),a=e.closest("label"),i=e.closest(".tmcp-field-wrap"),o=i.find(".tm-filename"),r=e.val().replace("C:\\fakepath\\","");!o.length>0&&(o=t('<span class="tm-filename"></span>'),a.after(o)),o.html(r);var n=d.data("num_uploads");n||(n=[]),n[e.closest(".cpf_hide_element").attr("data-uniqid")]=r,d.data("num_uploads",n)}),a.find("input.qty").last().off("change.cpf").on("change.cpf",function(){m.trigger("tm-epo-check-dpd"),t(this).data("tm-prev-value",t(this).val()),m.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",a.find("input.qty").last().val()),a.find(".total_price").off("wc-measurement-price-calculator-total-price-change.cpf").on("wc-measurement-price-calculator-total-price-change.cpf",function(t,e,a){p.find(".cpf-product-price").val(a),l.data("price",a),m.trigger({type:"tm-epo-update"})}),a.find(".product_price").off("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf").on("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf",function(t,e,a){p.find(".cpf-product-price").val(a),l.data("price",a),m.trigger({type:"tm-epo-update"})}),m.off("woocommerce-nyp-update.cpf").on("woocommerce-nyp-update.cpf",function(){var t=m.find(".nyp"),e=t.data("price");t.length>0&&(p.find(".cpf-product-price").val(e),l.data("price",e),m.trigger({type:"tm-epo-update"}))}),H.off("woocommerce-nyp-updated.cpf").on("woocommerce-nyp-updated.cpf",function(){m.trigger("woocommerce-nyp-update.cpf")}),m.trigger("woocommerce-nyp-update.cpf"),t("#fancy-product-designer-"+l.parent().attr("data-product-id")).off("priceChange.cpf").on("priceChange.cpf",function(t,e,a){var i=a;void 0===l.data("fpdprice")?l.data("fpdprice",parseFloat(i)):l.data("fpdprice",parseFloat(i)),void 0===l.data("tcprice")?l.data("tcprice",parseFloat(l.data("price"))):l.data("price",parseFloat(l.data("tcprice"))),i=parseFloat(l.data("price"))+parseFloat(i),l.parent().find(".cpf-product-price").val(i),l.data("price",i),m.trigger({type:"tm-epo-update",norules:1})}),m.off("tm-epo-check-dpd").on("tm-epo-check-dpd",function(e){var a=l,i=a.data("fields-price-rules");if(1==i){var o=a.data("product-price-rules"),r=a.data("tm_for_cart");if(o&&r){var n='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(n="input.variation_id");var c=r.find("input.qty").last(),d=parseFloat(c.val()),s=parseFloat(c.data("tm-prev-value")),p=r.find(n).val();p||(p=0),isNaN(d)&&(a.attr("data-is-sold-individually")||0==c.length)&&(d=1),(o[p]&&0!=p||o[0])&&(o[p]||(p=0),t(o[p]).each(function(t,e){var a=parseFloat(e.min),i=parseFloat(e.max);a<=d&&d<=i&&(a<=s&&s<=i||mt(r))}))}}}),m.off("tm-epo-update").on("tm-epo-update",function(a){var r,c=t(this),s=l.attr("data-tm-epo-final-total-box"),p=c.attr("data-product_id"),f=c.find("input.variation_id").length>0?"input.variation_id":'input[name^="variation_id"]',_=0,u=0,h=!1,g=0,y=l.data("type"),w=!1,k=c.find("input.qty").last(),x=parseFloat(k.val()),j=m.find(".cpf-bto-price"),q=!0,F=!1,N=c.find(f).val(),C=l.attr("data-price-override"),T=[];p||(p=c.closest(".component_content").attr("data-product_id"),p||(p=0)),o&&l.addClass("cpf-bto-totals"),a.norules?(1==a.norules&&lt(a.element),Wt=[],d.find(".tm-epo-late-field").each(function(){var e=t(this),a=e.data("tm-price-for-late");e.data("price",0),Wt.push({setter:e,price:a,bundleid:p})})):mt(c),isNaN(x)&&(l.attr("data-is-sold-individually")||0==k.length)&&(x=1),l.length?_=pt(l):j.length>0&&(_=j.val()),u=_,o&&c.find(".cpf-bto-price").length>0?(F=!0,_=parseFloat(c.find(".cpf-bto-price").val()),q=c.find(".cpf-bto-price").data("per_product_pricing")):!o&&e.find(".cpf-bto-price").length>0&&(r=1,h=[],e.find(".cpf-bto-price").each(function(e,a){if(!isNaN(parseFloat(t(this).val()))){var i=t(this).closest(".cart").find("input.qty");i=i.length>0?parseFloat(i.val()):1;var o=t(this).parent().find(".cpf-bto-totals").attr("data-is-sold-individually"),r=t(this).parent().find(".cpf-bto-optionsprice").val();r=isNaN(parseFloat(r))?0:parseFloat(r),_=parseFloat(_)+parseFloat(t(this).val()*i),h.push([t(this).val(),r,i,o])}}),e.find(".cpf-bto-optionsprice").each(function(e,a){isNaN(parseFloat(t(this).val()))||(_=parseFloat(_)+parseFloat(t(this).val()))})),(o||Tt&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement)&&("variable"!=y&&"variable-subscription"!=y||l.data("moved_inside")||(c.find(".variations_button").before(l),l.data("moved_inside",1))),Tt&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&("bto"!=y&&"composite"!=y||l.data("moved_inside")||(c.find(".bundle_price,.composite_price").after(l),l.data("moved_inside",1))),d.find(".tmcp-field").each(function(){var e=t(this),a=e.closest(".cpf_hide_element"),o=a.attr("data-fblabelshow"),r=a.attr("data-fbvalueshow"),n=""==o?a.find(".tm-epo-field-label").html():"",c="",d=a.find(".tm-qty").val();if(void 0==d&&(d=""),e.is(":checkbox, :radio, :input")&&i(e)){var s=0;if(e.is(".tmcp-checkbox, .tmcp-radio"))if(e.is(":checked")){s=e.data("price"),w=!0,e.data("isset",1);var p=e.closest("li.tmcp-field-wrap"),l=p.find(".checkbox_image,.radio_image");c="";var m=e.closest("li.tmcp-field-wrap").find(".tm-label");m.length&&(c=m.html()),l.length&&(c+=l.clone().addClass("tc-img-floating")[0].outerHTML),e.is(".use_images")&&(c=p.find(".tc-label").first().html(),l.length&&(c+=l.clone().addClass("tc-img-floating")[0].outerHTML)),T.push({title:n,value:c,price:s,quantity:d,label_show:o,value_show:r})}else e.data("isset",0);else if(e.is(".tmcp-select")){s=e.find("option:selected").data("price");var f=e.children("option:selected");""===f.val()&&""===f.attr("data-rulestype")||(w=!0),e.find("option").data("isset",0),e.find("option:selected").data("isset",1),""===e.find("option:selected").val()&&""===e.find("option:selected").attr("data-rulestype")||(c=e.find("option:selected").text(),T.push({title:n,value:c,price:s,quantity:d,label_show:o,value_show:r}))}else if(e.val())if(e.is(".tmcp-range")&&"0"==e.val())e.data("isset",0);else{if(s=e.data("price"),w=!0,e.data("isset",1),c=e.val(),e.is(".tmcp-range")){var _=t(".tm-range-picker[data-field-id='"+e.attr("id")+"']"),u=_.attr("data-step").split(".");u=1==u.length?0:u[1].length,c=accounting.formatNumber(c,{decimal:z,thousand:D,precision:u})}T.push({title:n,value:c,price:s,quantity:d,label_show:o,value_show:r})}else e.data("isset",0);s||(s=0),g=parseFloat(g)+parseFloat(s)}}),"1"==C&&parseFloat(g)>0&&(_=u=0),l.data("tm-floating-box-data",T);var I=0,O=0;if(d.find(".tmcp-sub-fee-field,.tmcp-fee-field").each(function(){var e=t(this);if(e.is(":checkbox, :radio, :input")&&i(e)){var a=0;if(e.is(".tmcp-checkbox, .tmcp-radio"))e.is(":checked")?(a=e.data("price"),w=!0,e.data("isset",1)):e.data("isset",0);else if(e.is(".tmcp-select")){a=e.find("option:selected").data("price");var o=e.children("option:selected");""===o.val()&&""===o.attr("data-rulestype")||(w=!0),e.find("option").data("isset",0),e.find("option:selected").data("isset",1)}else e.val()?(a=e.data("price"),w=!0,e.data("isset",1)):e.data("isset",0);a||(a=0),e.is(".tmcp-sub-fee-field")&&(I=parseFloat(I)+parseFloat(a)),e.is(".tmcp-fee-field")&&(O=parseFloat(O)+parseFloat(a))}}),Mt=w,Y(),O>0&&(w=!0),"bto"==l.attr("data-type")||"composite"==l.attr("data-type")){var S=Ut.data("btois");"show"===S&&(w=!0)}r&&(w=!0),o&&!q&&(w=!1),"pxq"!=s&&"hide"!=s&&"normal"!=s&&"final"!=s&&"hideoptionsifzero"!=s||(w=!0),x>1&&(w=!0),"variable"!=y&&"variable-subscription"!=y||N||(w=!1);var M=g;_=v(_,l);var A=jt(parseFloat(_)+parseFloat(M),p,l);"disable"==s&&(w=!1),"disable_change"!=s&&"yes"!=tm_epo_js.tm_epo_change_variation_price&&"yes"!=tm_epo_js.tm_epo_change_original_price||(w=!0);var L={};g=parseFloat(g*x);var P,R,E=0;tm_epo_js.extra_fee&&(E=parseFloat(tm_epo_js.extra_fee),isNaN(E)&&(E=0));var H=parseFloat(_*x);if(h){_=v(u,l),H=H=parseFloat(_*x);for(var U=0;U<h.length;U++){var G=h[U],V=0;G[3]?(V=v(parseFloat(G[0])+parseFloat(G[1]),l),_+=V,H+=parseFloat(V)):(V=+v(parseFloat(G[0])*parseFloat(G[2])+parseFloat(G[1]),l),_+=V,H+=parseFloat(V*x))}}if(M+=A,g=parseFloat(M*x),void 0!==l.data("tc_is_bookings")){var $=l.data("bookings_form"),J=0,K=!1;$.length&&("1"==tm_epo_js.wc_booking_person_qty_multiplier&&$.find('[id^="wc_bookings_field_persons"]').each(function(){J+=parseFloat(t(this).val()),K=!0}),"1"==tm_epo_js.wc_booking_block_qty_multiplier&&$.find("#wc_bookings_field_duration").length&&(J+=parseFloat($.find("#wc_bookings_field_duration").val()),K=!0)),K&&(g*=J)}g=t.tc_apply_filters("tc_adjust_total",g,l),O=t.tc_apply_filters("tc_adjust_totals_fee",O,l);var tt=parseFloat(g)+parseFloat(O);P=b(tt,l,!0,!0),H=parseFloat(H+tt+E),H=t.tc_apply_filters("tc_adjust_product_total_price",H,tt,E,g,O,l),R=b(H,l,!0,!0);var et,at=!1,ot="",rt=!1,nt=!1,ct="",dt=!1;if("pxq"==s||"final"==s||"hide"==s||0==tt&&"hideoptionsifzero"==s||(at=!0),E&&(rt=!0,ot=b(E,l,!0,!0)),R&&(nt=!0),l.data("is-subscription")){var _t=parseFloat(l.data("subscription-sign-up-fee"))+parseFloat(I);_t&&(dt=!0,ct=b(_t,l,!0,!0))}if((a.product_false===!0||void 0!==l.data("bookings_form_init")&&0===l.data("bookings_form_init"))&&(R="-"),L={options_total:tm_epo_js.i18n_options_total,formatted_options_total:P,show_options_total:at,extra_fee:tm_epo_js.i18n_extra_fee,formatted_extra_fee:ot,show_extra_fee:rt,final_total:tm_epo_js.i18n_final_total,formatted_final_total:R,show_final_total:nt,sign_up_fee:tm_epo_js.i18n_sign_up_fee,formatted_subscription_fee_total:ct,show_sign_up_fee:dt},L=t.tc_apply_filters("tc_adjust_tc_totals_ob",L,{epo_object:Zt,tm_set_price:b,product_total_price:H,qty:x}),et=t.fn.tm_template(Q.tc_final_totals,L),l.data("tm-html",et),w&&x>0){if("disable_change"==s||"yes"==tm_epo_js.tm_epo_change_variation_price){var ut=t.tc_apply_filters("hide_native_price",!0);ut===!0&&"disable"!=s&&"disable_change"!=s?ft(c).hide():ft(c).show()}if("disable"==s||"disable_change"==s||"hideifoptionsiszero"==s&&0==tt||"hide"==s)et="",l.html(et).hide(),Ht.hide();else{l.html(et).show(),Ht.show();var ht=l.data("fields-price-rules"),vt=l.data("tm-epo-dpd-prefix"),gt=l.data("tm-epo-dpd-suffix");if(1==ht){var bt=st(l,ht),yt="";if(bt[0]&&bt[1]&&(vt||gt)){var wt=bt[1],kt="";switch(wt){case"percentage":kt=bt[0]+"%";break;case"price":kt=b(bt[0]*x,l,!1,!1);break;case"fixed":kt=b(bt[0],l,!1,!1)}yt=vt+" "+kt+" "+gt}yt&&l.find(".tm-final-totals .amount.final").after('<span class="tm_dpd_label">'+yt+"</span>")}}if(R&&H){var xt=ft(c),qt=accounting.formatMoney(H,{
symbol:"",decimal:z,thousand:D,precision:tm_epo_js.currency_format_num_decimals,format:""});"disable_change"!=s&&"yes"!=tm_epo_js.tm_epo_change_variation_price||xt.html(t.fn.tm_template(Q.tc_formatted_price,{price:qt})).show(),"disable_change"!=s&&"yes"!=tm_epo_js.tm_epo_change_original_price||(p&&o&&c.find(".cpf-bto-price").length>0?t("#component_"+p).find(W).html(t.fn.tm_template(Q.tc_formatted_price,{price:qt})).show():!o&&e.find(".cpf-bto-price").length>0?c.find(Z).html(t.fn.tm_template(Q.tc_formatted_price,{price:qt})).show():t(X).html(t.fn.tm_template(Q.tc_formatted_price,{price:qt})).show())}o?(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(g)),Ct.trigger({type:"tm-epo-update",norules:1})):(Ut.data("is_active",!0),it())}else ft(c).show().each(function(){t(this).data("tm-original-html")?t(this).html(t(this).data("tm-original-html")):t(this).data("tm-original-html",t(this).html())}),0==u&&"yes"==tm_epo_js.tm_epo_remove_free_price_label&&ft(c).hide(),l.empty().hide(),o&&(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(g*x)),Ct.trigger({type:"tm-epo-update",norules:1})),it();n&&e.find(".bto_form_"+n+",#composite_form_"+n+",#composite_data_"+n).trigger("cpf_bto_review"),Ct.trigger("tm-epo-after-update"),B.trigger("tc-epo-after-update",{epo:L})}),a.find(".variations_form").off("found_variation.tmepo tm_fix_stock",".single_variation_wrap").on("found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(e,i){F(t(this),a)}),"variable"!=u&&"variable-subscription"!=u||(a.find(".variations_form").off("found_variation.tmepo").on("found_variation.tmepo",function(e,i){r(e,i),F(t(this),a)}).off("hide_variation.tmepo").on("hide_variation.tmepo",function(t,e){m.trigger({type:"tm-epo-update",norules:2})}).trigger("check_variations"),B.on("tm-do-epo-update",function(){m.trigger({type:"tm-epo-update"})})),a.find(".variations select").off("blur.cpf").on("blur.cpf",function(){e.find(".variations_form").data("tm_variations_did_init",!0)}),kt(a,f,e,d),e.find(".tm-variation-ul-color .tmhexcolorimage-li-nowh,.tm-variation-ul-image .tmhexcolorimage-li-nowh,ul.use_images_containter .tmhexcolorimage-li-nowh").each(function(e,a){var a=t(a),i=.9*a.width(),o=a.find(".tmhexcolorimage");o.css({"min-width":i+"px","min-height":i+"px"})}),B.trigger("tm-epo-init-events",{epo:{epo_id:s,form:q(),current_cart:m,cart_container:a,epo_holder:d,totals_holder_container:p,totals_holder:l,main_cart:Ct,main_epo_inside_form:Tt,product_id_selector:Pt,epo_id_selector:Rt,product_id:c,this_epo_container:Et,this_totals_container:Ht,this_epo_totals_container:Ut}}),B.trigger("epo_options_before_visible"),setTimeout(function(){d.css("opacity",0).addClass("tc-show").animate({opacity:1},A,"easeOutExpo",function(){B.trigger("epo_options_visible"),B.trigger("tmlazy")})},M)}function ut(){if(!e.data("tm-composite-setup")){var a=Ut;e.data("tm-composite-setup",1),t(St).find(".cart").append('<input type="hidden" class="tm-post-support addon">'),e.find(".tm-post-support.addon").on("change",function(e){t(this).closest(St).trigger("wc-composite-item-updated.cpf")}),t(St).off("found_variation.cpf").on("found_variation.cpf",function(i,r){var n,c=t(this),d=ot(c),s=rt(d),p=ct(c);s&&(e.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(nt(p)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(nt(p)).find(".amount").empty(),o(s)===!0&&(n=parseFloat(r.price)),c.find(".cpf-bto-price").data("per_product_pricing",o(s)),c.find(".cpf-bto-price").val(n),Ct.data("per_product_pricing",o(s)),c.find(".cart").trigger({type:"tm-epo-update",norules:1}),setTimeout(function(){Ct.trigger({type:"tm-epo-update",norules:1})},100),a.data("btois","none"))}).off("wc-composite-component-loaded.cpf").on("wc-composite-component-loaded.cpf",function(){t(this).trigger("wc-composite-item-updated.cpf")}).off("wc-composite-item-updated.cpf").on("wc-composite-item-updated.cpf",function(){vt(),e.find(".tm-collapse").tmtoggle();var a=t(this),i=a.find(".tm-extra-product-options");l(a),p(a),gt(a),bt(),f(i),_(i),r(i);var n,c=ot(a),d=rt(c),s=ct(a);e.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(nt(s)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(nt(s)).find(".amount").empty(),d&&(o(d)===!0&&(n=parseFloat(a.find(".bto_item_data,.component_data").data("price"))),a.find(".cpf-bto-price").data("per_product_pricing",o(d)),a.find(".cpf-bto-price").val(n),Ct.data("per_product_pricing",o(d)),_t(a,a.find(".cart")),a.find(".cart").trigger({type:"tm-epo-update",composite_item:a}),Ct.trigger({type:"tm-epo-update",norules:1}),F(a.find(".cart"),a))}).off("change.cpfbto",".bto_item_options select,.component_options_select").on("change.cpfbto",".bto_item_options select,.component_options_select",function(i){var o=t(this),r=ot(o),n=ct(o);e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(nt(n)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(nt(n)).find(".amount").empty(),""===o.val()?(a.data("passed",!1),a.data("btois","none")):Ct.trigger({type:"tm-epo-update",norules:1})}).off("woocommerce_variation_select_change.cpf").on("woocommerce_variation_select_change.cpf",function(i){var o=t(this),r=ot(o),n=ct(o);e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(nt(n)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(nt(n)).find(".amount").empty(),""===o.find(".variations .attribute-options select").val()&&(a.data("passed",!1),a.data("btois","none"))}),e.find(".bundle_wrap").off("show_bundle.cpf,wc-composite-show-add-to-cart.cpf").on("show_bundle.cpf,wc-composite-show-add-to-cart.cpf",function(){var e=t(this).closest(".cart").attr("data-container-id");ht(e)}),e.find(".composite_data .composite_wrap").off("wc-composite-show-add-to-cart.cpf").on("wc-composite-show-add-to-cart.cpf",function(){var a=t(this).closest(".composite_form"),i=a.find(".composite_data").data("container_id");ht(i),e.find("#composite_data_"+i).trigger("cpf_bto_review")}),e.find(".bto_form,.composite_form").off("woocommerce-product-addons-update.cpf cpf_bto_review").on("woocommerce-product-addons-update.cpf cpf_bto_review",function(){var e=t(this);t(this).parent().find(St).each(function(){var a,i=t(this),o=ct(i),r=e.find(nt(o)),n=i.find(".cpf-bto-optionsprice").val();if(r.length&&(r.data("cpf_review_price")?a=accounting.unformat(r.data("cpf_review_price"),z):r.find(".amount").length&&(a=accounting.unformat(r.find(".amount").html(),tm_epo_js.currency_format_decimal_sep),r.data("cpf_review_price",a)),n)){var c=parseFloat(a)+parseFloat(n);r.find(".amount").html(b(c,!1))}})}),t(St).trigger("wc-composite-component-loaded.cpf")}}function ht(a){var i=!0,o=Ut;e.find(".bto_form_"+a+",#composite_form_"+a+",#composite_data_"+a).parent().find(St).each(function(){var o=t(this),r=ct(o),n=e.find(".bto_form_"+a+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_form_"+a+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_data_"+a+" .composite_wrap .composite_button .form_data_"+r),c=n.find("input.product_input").val(),d=n.find("input.quantity_input").val(),s=n.find("input.variation_input").val(),p=o.find(".bto_item_data,.component_data").data("product_type");void 0==p||""==p||""===c?i=!1:"none"!=p&&""==d?i=!1:"variable"==p&&void 0==s&&(i=!1)}),i?o.data("btois","show"):o.data("btois","none"),Ct.trigger({type:"tm-epo-update",norules:1})}function vt(){"yes"!=tm_epo_js.tm_epo_no_lazy_load&&(S?t(S).find("img.tmlazy").lazyLoadXT():t(".tc-extra-product-options img.tmlazy").lazyLoadXT())}function gt(e){e||(e=Et),e.find(".tm-owl-slider-section").each(function(){var e=t(this),a=e.css("display");e.find(".tm-slide").first().before('<div class="tm-owl-slider"></div>'),e.find(".tm-slide").appendTo(e.find(".tm-owl-slider")),e=e.find(".tm-owl-slider"),a=e.css("display"),e.show().addClass("owl-carousel").tmowlCarousel({dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[tm_epo_js.i18n_prev_text,tm_epo_js.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1}),e.css("display",a)})}function bt(e){e||(e=Et.find(".tm-color-picker")),t(e).length&&(t(e).spectrum({showButtons:!0,clickoutFiresChange:!1,chooseText:tm_epo_js.closeText,cancelText:tm_epo_js.i18n_cancel}),t(e).spectrum("enable"))}function yt(e){var a=e.closest(".tmcp-field-wrap").find("label img"),i=t(a).first().attr("data-original");return e.is("select.tm-product-image")&&(e=e.children("option:selected")),i||(i=t(a).first().attr("src")),i||(i=e.attr("data-image")),e.attr("data-imagep")&&(i=e.attr("data-imagep")),!!i}function wt(){var a=Zt.form,o=e.closest("#product-"+c);if(!o.length>0&&(o=e.closest(".post-"+c)),""!==tm_epo_js.tm_epo_global_product_image_selector)var r=t(tm_epo_js.tm_epo_global_product_image_selector);else var r=o.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first();t(r).length>1&&(r=t(r).first());var n=!1,s=t(".images"),p=t(".yith_magnifier_zoom"),l=s.find(".yith_magnifier_zoom").first().attr("href"),m=l,f=s.find(".yith_magnifier_zoom img").first().attr("src"),_=r.width(),u=r.height();window.yith_magnifier_options&&s.data("yith_magnifier")&&(n=!0);var h=!1,v=t(".iosSlider.product-gallery-slider,.iosSlider.product-slider");v.length&&v.iosSlider&&(h=!0);var g=!1,b=o.find(".images .fusion-flexslider");b.length&&b.flexslider&&(g=!0);var y=!1,w=o.find(".images .easyzoom");w.length&&w.filter(".images .easyzoom.first").data("easyZoom")&&(w=w.filter(".images .easyzoom.first").data("easyZoom"),y=!0),B.on("load",function(){setTimeout(function(){w.length&&w.data("easyZoom")&&(w=w.data("easyZoom"),y=!0)},150)});var k=r.data("elevateZoom")||!1,x=o.find("div.product-images .woocommerce-main-image");if(t(r).length>0){r.data("tm-current-image",!1);var j=r.closest("a"),q=r.attr("src");e.off("tm_change_product_image").on("tm_change_product_image",function(e,o){var p=o.element.closest(".cpf-section"),m=p.is(".tm-epo-variation-section"),b=m?p:o.epo_holder,j=b.find(".tm-product-image:checked,select.tm-product-image"),q=[];j.each(function(){var e=t(this);i(e)&&yt(e)&&d({element:e.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&q.push(e)});var F="";q.length&&(j=q[q.length-1],F=j.attr("id"));var N=r.data("tm-current-image"),C=!0;j.attr("id")!=o.element.attr("id")&&(C=!1);var N=o.element.attr("id"),T=o.main_product,z=T.closest("#product-"+c);!z.length>0&&(z=T.closest(".post-"+c));var D=z.find("#"+N+"_tmimage"),I=_,O=u;0==D.length&&(D=r);var S=t("<div class='blockUI blockOverlay tm-preloader-img'></div>");S.css({width:I,height:O});var M=function(){S.remove(),a.tc_image_update(!1),r.data("tm-current-image",!1),z.find(".tm-clone-product-image").hide(),r.show()};if(o.src!=D.attr("src")||!D.is(":visible")){if(o.src===!1)return void M();var A=r.tm_clone(),L=new Image;C&&r.before(S),l=s.find(".yith_magnifier_zoom").first().attr("href"),f=s.find(".yith_magnifier_zoom img").first().attr("src"),L.onerror=function(){M()},L.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height==0)return void this.onerror();if(z.find("#"+N+"_tmimage").remove(),z.find(".tm-clone-product-image").hide(),A.prop("src",L.src).hide(),r.hide().after(A),A.css("opacity",0).show(),h&&setTimeout(function(){v.iosSlider("update")},150),g&&B.trigger("resize"),y&&w.swap(null,L.src),k&&x.each(function(){var e=t(this).data("elevateZoom");"undefined"!=typeof e&&e.swaptheimage(L.src,L.src)}),S.animate({opacity:0},750,"easeOutExpo",function(){S.remove()}),A.animate({opacity:1},window.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),n){A.attr("srcset",L.src).attr("src-orig",L.src),s.data("yith_magnifier")&&s.yith_magnifier("destroy");var e={elements:{zoom:t(".yith_magnifier_zoom"),zoomImage:A,gallery:t(".yith_magnifier_gallery li a")}};s.yith_magnifier(t.extend(!0,{},yith_magnifier_options,e))}B.trigger("tm_change_product_image_loaded",{src:o.src,element:o.element,main_product:o.main_product,epo_holder:o.epo_holder})},A.attr("id",N+"_tmimage").addClass("tm-clone-product-image").hide(),A.attr("src-orig")&&A.attr("src-orig",o.src),C?(L.src=o.src,a.tc_image_update(o.element,A),r.data("tm-current-image",N),B.trigger("tm_change_product_image_show",{src:o.src,element:o.element,main_product:o.main_product,epo_holder:o.epo_holder})):(A.prop("src",o.src).hide(),r.after(A)),B.trigger("tm_change_product_image_end",{src:o.src,element:o.element,main_product:o.main_product,epo_holder:o.epo_holder})}}),e.off("tm_restore_product_image").on("tm_restore_product_image",function(e,i){B.trigger("tm_restore_product_image_pre",{element:i.element,main_product:i.main_product,epo_holder:i.epo_holder});var o=i.element.attr("id"),d=i.main_product,f=d.closest("#product-"+c);!f.length>0&&(f=d.closest(".post-"+c));var _,u,b=i.element.closest(".cpf-section"),F=b.is(".tm-epo-variation-section"),N=F?b:i.epo_holder,C=!1,T=f.find("#"+o+"_tmimage").is(":visible");if(f.find("#"+o+"_tmimage").remove(),0==f.find(".tm-clone-product-image").length)r.show(),r.data("tm-current-image",!1),a.tc_image_update(!1);else{if(!T)return void B.trigger("tm_restore_product_image_loaded_exit",{element:i.element,main_product:i.main_product,epo_holder:i.epo_holder});for(var z,D=f.find(".tm-clone-product-image").length,o=r.data("tm-current-image"),I=D-1;I>=0;I--){if(u=f.find(".tm-clone-product-image").eq(I),_=u.attr("id").replace("_tmimage",""),z=N.find('[id="'+_+'"]'),z.is(":checked")&&z.closest(".cpf_hide_element").is(":visible")){f.find(".tm-clone-product-image").eq(I).show(),j.attr("href",f.find(".tm-clone-product-image").eq(I).prop("src")),r.data("tm-current-image",_),C=!0;break}f.find(".tm-clone-product-image").eq(I).hide()}C?f.find("#"+o+"_tmimage").remove():(r.show(),r.data("tm-current-image",!1),a.tc_image_update(!1))}n&&(f.find(".tm-clone-product-image").filter(":visible").length?p.attr("href",l):p.attr("href",m),s.data("yith_magnifier")&&s.yith_magnifier("destroy"),s.yith_magnifier(yith_magnifier_options)),h&&setTimeout(function(){v.iosSlider("update")},150),g&&B.trigger("resize"),y&&(C?w.swap(null,u.attr("src")):w.swap(null,q)),k&&x.each(function(){var e=t(this).data("elevateZoom");"undefined"!=typeof e&&(C?e.swaptheimage(u.attr("src"),u.attr("src")):e.swaptheimage(q,q))}),B.trigger("tm_restore_product_image_loaded",{element:i.element,main_product:i.main_product,epo_holder:i.epo_holder})}),e.off("tm_attempt_product_image").on("tm_attempt_product_image",function(e,o){var f=o.main_product,_=f.closest("#product-"+c);!_.length>0&&(_=f.closest(".post-"+c));var u=o.element?o.element.closest(".cpf-section"):t(f.find(".tm-epo-variation-section"),o.epo_holder),b=u.is(".tm-epo-variation-section"),F=b?u:o.epo_holder,N=F.find(".tm-product-image:checked,select.tm-product-image");F=f.find(".tm-epo-variation-section").add(o.epo_holder),N=F.find(".tm-product-image:checked,select.tm-product-image");var C=[];N.each(function(){var e=t(this);i(e)&&yt(e)&&d({element:e.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&C.push(e)});var T="";C.length&&(N=C[C.length-1],T=N.attr("id"));var z,D,I=!1,O=r.data("tm-current-image");if(C.length&&N.length&&(!O||T!=O))return void N.last().trigger("tm_trigger_product_image");if(O&&!F.find('[id="'+O+'"]').closest(".cpf_hide_element").is(":visible")){_.find("#"+O+"_tmimage").remove();var S=_.find(".tm-clone-product-image").length;if(0==S)r.show(),r.data("tm-current-image",!1),a.tc_image_update(!1);else{for(var M=S-1;M>=0;M--){z=_.find(".tm-clone-product-image").eq(M),D=z.attr("id").replace("_tmimage","");var A=F.find('[id="'+D+'"]');if(A.is(":checked")&&A.closest(".cpf_hide_element").is(":visible")){_.find(".tm-clone-product-image").eq(M).show(),j.attr("href",_.find(".tm-clone-product-image").eq(M).prop("src")),r.data("tm-current-image",D),I=!0;break}_.find(".tm-clone-product-image").eq(M).hide()}I||(r.show(),r.data("tm-current-image",!1),a.tc_image_update(!1))}n&&(_.find(".tm-clone-product-image").filter(":visible").length?p.attr("href",l):p.attr("href",m),s.data("yith_magnifier")&&s.yith_magnifier("destroy"),s.yith_magnifier(yith_magnifier_options)),h&&setTimeout(function(){v.iosSlider("update")},150),g&&B.trigger("resize"),y&&(I?w.swap(null,z.attr("src")):w.swap(null,q)),k&&x.each(function(){var e=t(this).data("elevateZoom");"undefined"!=typeof e&&(I?e.swaptheimage(z.attr("src"),z.attr("src")):e.swaptheimage(q,q))})}});var F=[];t(Et.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);i(e)&&""!==e.val()&&F.push(e)}),F.length&&F[F.length-1].trigger("tm_trigger_product_image")}B.trigger("tm_product_image_loaded")}function kt(e,a,i,o){var r='input[name^="variation_id"]';if(e.find("input.variation_id").length>0&&(r="input.variation_id"),o.find(".tm-epo-variation-element").length||o.data("tm-epo-variation-element")){o.data("tm-epo-variation-element",o.find(".tm-epo-variation-element"));var n=o.find(".tm-epo-variation-section");if(a&&"main"!=a){var c=n.closest("li.tm-extra-product-options-field");e.find(".variations").hide().after(n.addClass("tm-extra-product-options nopadding")),c.is(":empty")&&c.hide(),e.off("wc_variation_form.tmlogic").on("wc_variation_form.tmlogic",function(){e.find(".variations_form").on("click.tmlogic",".reset_variations",function(t){e.find(".tm-epo-variation-element").closest("li").show(),e.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),e.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),B.trigger("tmlazy"),i.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(t,a){j(e)});for(var t=0;t<O.length;t++){var a=O[t],o=typeof a;if("object"==o){var n="string"==typeof a.name||!1,c="string"==typeof a.selector||!1,d="function"==typeof a.func||!1;n&&d&&('input[name="variation_id"]'==c&&(c=r),a.selector?e.data("tm-styled-variations",1).off(a.name,a.selector).on(a.name,a.selector,a.func):e.data("tm-styled-variations",1).off(a.name).on(a.name,a.func))}}O=[],e.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")})}else{e=e.find(".variations_form"),e.find(".variations").hide();var c=n.closest("li.tm-extra-product-options-field");e.find(".variations").hide().after(n.addClass("tm-extra-product-options nopadding")),c.is(":empty")&&c.hide(),e.off("click.tmlogic",".reset_variations").on("click.tmlogic",".reset_variations",function(t){e.find(".tm-epo-variation-element").closest("li").show(),e.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),e.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),B.trigger("tmlazy"),i.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(t,a){j(e)});for(var d=0;d<O.length;d++){var s=O[d],p=typeof s;if("object"==p){var l="string"==typeof s.name||!1,m="string"==typeof s.selector||!1,f="function"==typeof s.func||!1;l&&f&&('input[name="variation_id"]'==m&&(m=r),s.selector?e.data("tm-styled-variations",1).off(s.name,s.selector).on(s.name,s.selector,s.func):e.data("tm-styled-variations",1).off(s.name).on(s.name,s.func))}}O=[],e.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}Dt[Dt.length]={trigger:function(){return!0},on_true:function(){return i.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){i.find(".tm-epo-variation-element").removeAttr("disabled")}};var _=i.find(".tm-variation-ul-color").find("li");_.each(function(e,a){var a=t(a),i=.9*a.width(),o=a.find(".tmhexcolorimage");o.css({"min-width":i+"px","min-height":i+"px"})})}}function xt(){var e=Ut,a=e.attr("data-theme-name");if(a){a=a.toLowerCase();var i=Et.find("select");switch(a){case"flatsome":case"flatsome-child":case"flatsome child":i.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":i.wrap('<div class="avada-select-parent tm-select-parent"></div>'),t('<div class="select-arrow">&#xe61f;</div>').appendTo(Et.find(".tm-select-parent")),window.calc_select_arrow_dimensions&&calc_select_arrow_dimensions();break;case"bazar":case"bazar-child":case"bazar child":i.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":var o=function(){setTimeout(function(){var e=t(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible");e.each(function(){t(this).is(".mpcthSelect")||(t(this).width(t(this).outerWidth()),t(this).customSelect({customClass:"mpcthSelect"}))})},100)};B.on("cpflogicrun",function(){o()}),B.on("epo_options_visible",function(){o()});break;case"handmade":case"handmade child theme":t(".tm-owl-slider.owl-carousel").addClass("manual")}B.trigger("tm-theme-specific-actions",{epo:{theme_name:a,all_epo_selects:i}})}G.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){t(this).closest(".quantity").find("input.qty").trigger("change.cpf")})}function jt(e,a,o){var r=0;return t.each(Wt,function(t,n){var c,d,s=n.price,p=n.original_price,l=n.setter,m=n.bundleid,f=l;if(l.is("option")&&(f=l.closest("select")),c=f.attr("name").tmjid(),d=Et.find("#"+c+"_hidden"),m==a){s=s/100*e,p=p/100*e,f.data("tm-quantity")&&(s*=parseFloat(f.data("tm-quantity")),p*=parseFloat(f.data("tm-quantity"))),1==l.data("isset")&&i(l)&&(r+=s);var _=b(s,o,!0,!1,l),u=b(p,o,!0,!1,l);l.data("price",v(s,o,l)),l.data("pricew",v(s,o,l)),l.data("original_price",v(p,o,l)),l.data("original_pricew",v(p,o,l)),y(l.closest(".tmcp-field-wrap").find(".tc-price"),s,_,p,u),0==d.length&&f.before('<input type="hidden" id="'+c+'_hidden" name="'+c+'_hidden" value="'+g(s,o,l)+'" />'),l.is(".tm-epo-field.tmcp-radio")?l.is(":checked")&&d.val(g(s,o,l)):d.val(g(s,o,l))}else if(void 0!==l.data("pricew")){var _=b(l.data("pricew"),o,!0,!1,l),u="";void 0!==l.data("original_pricew")&&(u=b(l.data("original_pricew"),o,!0,!1,l)),y(l.closest(".tmcp-field-wrap").find(".tc-price"),l.data("pricew"),_,l.data("original_pricew"),u)}}),Wt=[],r}function qt(){Et.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var e=t(this);V(e,!0),$(e,!0)});var e=Et.find(".tm-exactlimit");e.length&&K(e);var a=Et.find(".tm-minimumlimit");a.length&&et(a)}function Ft(){"yes"==tm_epo_js.tm_epo_upload_popup&&(Dt[Dt.length]={trigger:function(){return!0},on_true:function(){var e=Et.data("num_uploads");if(e){t("body").tm_floatbox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tm_wrapper",data:t.fn.tm_template(Q.tc_upload_messages,{files:e,title:tm_epo_js.i18n_uploading_files,message:tm_epo_js.i18n_uploading_message})})}return!0},on_false:function(){return!0}})}function Nt(e){e=t(e),f(e),_(e),r(e),mt(),Wt=[],_t(),wt(),ut(),Ct.trigger("tm-epo-check-dpd"),Ct.trigger({type:"tm-epo-update"})}e=t(e),B.on("tc_manual_init",function(t,e){Nt(e)}),B.trigger("tm-epo-init-start");var Ct=!1,Tt=!1,zt=!1,Dt=[],It=!1,Ot="undefined"!=typeof c,St=".bto_item,.component",Mt=!1,At=!1;if(Ot||e.is(".product")&&(At=!0,Ot=H.find(L).length),!Ot&&"no"==tm_epo_js.tm_epo_enable_final_total_box_all&&!e.is(".tm-no-options-composite"))return void B.trigger("tm-epo-init-end-no-options");if(At&&(B.trigger("tm-epo-init-no-options"),!e.is(".product")||e.is(".tm-no-options-pxq")||e.is(".tm-no-options-composite")||(e=H)),!c){var Lt=e.find(P).last();Lt.length>0?c=Lt.val():(Lt=t(".tc-totals-form.tm-totals-form-main"),c=Lt.attr("data-product-id")),c||(c="")}s||(s=parseInt(e.find("input.tm-epo-counter").last().val()),isNaN(s)&&(s=""));var Pt=".tm-product-id-"+c,Rt='[data-epo-id="'+s+'"]',Et=t(".tc-extra-product-options"+Pt+Rt),Ht=t(".tc-totals-form"+Pt+Rt),Ut=t(".tc-epo-totals"+Pt+Rt);I(),Ct.data("product_id",c).data("epo_id",s).data("product_id_selector",Pt).data("epo_id_selector",Rt),qt(),Ft(),l(),p(),m(),it(),t.tm_tooltip(Et.find(".tm-tooltip")),Et.find(".tm-collapse").tmtoggle(),Et.find(".tm-section-link").tmsectionpoplink();var Zt={main_product:e,main_cart:Ct,epo_id:s,form:q(),main_epo_inside_form:Tt,product_id_selector:Pt,epo_id_selector:Rt,product_id:c,this_epo_container:Et,this_totals_container:Ht,this_epo_totals_container:Ut};t(Zt.form).data("epo_object",Zt);var Wt=[],Xt=e.find(".variations_form");if(Xt.length>0){var Bt=function(){Xt.on("wc_variation_form.cpf",function(){Xt.data("tc_loaded")||(f(Et),_(Et),r(Et),Wt=[],_t(),wt(),setTimeout(function(){Ct.trigger({type:"tm-epo-update"})},10),Xt.data("tc_loaded",!0))}),U&&Xt.trigger("wc_variation_form.cpf")},Gt=!1;if(t(".variation_form_section .variations-table").length&&(Gt=!0),Gt){var Qt=function(){var t=requestAnimationFrame(Qt),e=Xt.data("bound");e&&(cancelAnimationFrame(t),Bt(),Xt.trigger("wc_variation_form.cpf"))};Qt()}else Bt()}else setTimeout(function(){f(Et),_(Et),r(Et),Wt=[],_t(),wt(),ut(),Ct.trigger("tm-epo-check-dpd"),Ct.trigger({type:"tm-epo-update"})},20);vt(),gt(),bt(),k(),h(),Y(),xt(),C(),B.trigger("tm-epo-init-end",{epo:Zt})}function C(e){"no"==tm_epo_js.tm_epo_no_lazy_load&&t.extend(t.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:t.lazyLoadXT.updateEvent+" tmlazy"});var a=t(".tm-no-options-pxq, .tm-no-options-composite");a.length>0&&a.each(function(e,a){var i=t(a);N(i,!1)});try{var i=t(L).not(".tm-no-options-pxq, .tm-no-options-composite");i.length>0&&i.each(function(e,a){var i=t(this),o=i.attr("data-product-id"),r=i.attr("data-epo-id"),n=!1,c=t(P+'[value="'+o+'"]').closest("form,.cart").first().parent();!c.length>0&&(c=t(R+'[value="'+o+'"]').closest("form,.cart").first().parent(),!c.length>0&&(c=i.closest("form,.cart").first().parent(".tm-has-options"),!c.length>0&&i.is(".tc-shortcode")&&(c=i.parent()),c.length>0&&(n=!0,i.closest("form,.cart").first().append(t('<input name="add-to-cart" value="'+o+'" type="hidden" />')),i.closest("form,.cart").first().append(t('<input type="hidden" value="" class="variation_id" name="variation_id">'))))),c.length>0&&N(c,n,o,r)})}catch(t){}}String.prototype.tmtoFloat=function(){var t=accounting.unformat(this,T),e=parseFloat(t);return isNaN(e)?t:e},String.prototype.tm_isNumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)};var T=""==tm_epo_js.tm_epo_global_input_decimal_separator?tm_epo_js.currency_format_decimal_sep:e(),z=""==tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_decimal_sep:e(),D=""==tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_thousand_sep:","==e()?".":",",I=!1,O=[],S=!1,M=window.tc_epo_delay||500,A=window.tc_epo_animation_delay||500,L=".tc-extra-product-options",P='input[name="add-to-cart"]',R="input.tc-add-to-cart",E=".add_to_cart_button, .single_add_to_cart_button",H=t("body"),U=!1,Z=".composite_data .composite_wrap .price .amount",W=".component_wrap .price",X=".woocommerce div.product p.price",B=t(window),G=t(document),Q={price:wp.template("tc-price"),sale_price:wp.template("tc-sale-price"),tc_section_pop_link:wp.template("tc-section-pop-link"),tc_floating_box:wp.template("tc-floating-box"),tc_floating_box_nks:wp.template("tc-floating-box-nks"),tc_chars_remanining:wp.template("tc-chars-remanining"),tc_final_totals:wp.template("tc-final-totals"),tc_lightbox:wp.template("tc-lightbox"),tc_lightbox_zoom:wp.template("tc-lightbox-zoom"),tc_formatted_price:wp.template("tc-formatted-price"),tc_upload_messages:wp.template("tc-upload-messages")};Q=t.tc_apply_filters("tc_adjust_template_engine",Q),t.extend(t.tc_validator.messages,{required:tm_epo_js.tm_epo_global_validator_messages.required,email:tm_epo_js.tm_epo_global_validator_messages.email,url:tm_epo_js.tm_epo_global_validator_messages.url,number:tm_epo_js.tm_epo_global_validator_messages.number,digits:tm_epo_js.tm_epo_global_validator_messages.digits,maxlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.maxlength),minlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.minlength),max:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.max),min:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.min)}),t.fn.tm_find_matching_variations=function(e,a){var i=[];if(e)for(var o=0;o<e.length;o++){var r=e[o];t.fn.tm_variations_match(r.attributes,a)&&i.push(r)}return i},t.fn.tm_variations_match=function(t,e){var a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=e[i];void 0!==o&&void 0!==r&&0!==o.length&&0!==r.length&&o!==r&&(a=!1)}return a},t().tclightbox||(t.fn.tclightbox=function(){var e=this;if(0!=e.length)return e.each(function(){var e=t(this);if(!e.is(".tcinit")){var a=e.attr("src")||e.attr("data-original"),i=e.closest("label"),o=i.closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+i.attr("for")+"']");if(a=o.attr("data-imagel")||o.attr("data-imagep")||o.attr("data-image")||a){e.addClass("tcinit").before(t.fn.tm_template(Q.tc_lightbox,{}));var r=e.prev();r.prepend(e);var n=r.find(".tc-lightbox-button"),c=new Image;c.src=a,c.onload=function(){n.addClass("tcinit").on("click.tclightbox",function(){if(!(t(".tc-closing.tc-lightbox").length>0)){var e=t.tm_getPageSize(),i=t("<img>").addClass("tc-lightbox-img").attr("src",a).css("maxHeight",e[3]+"px"),o=t("body").tm_floatbox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomIn",animateOut:"tc-lightbox-zoomOut",data:t.fn.tm_template(Q.tc_lightbox_zoom,{img:i[0].outerHTML}),zIndex:102001});t(".tc-lightbox-img, .tc-lightbox-button-close").on("click",function(){o.cancelfunc()})}})}}}})},G.ready(function(){t(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image").tclightbox()})),t().tmsectionpoplink||(t.fn.tmsectionpoplink=function(){var e=this;if(0!=e.length)return e.each(function(){var e=t(this),a=e.attr("data-sectionid"),i=e.attr("data-title")?e.attr("data-title"):tm_epo_js.i18n_addition_options,o=t('.cpf-section[data-uniqid="'+a+'"]'),r=!1,n=t('<div class="fl-overlay"></div>').css({zIndex:e.zIndex-1,opacity:.8}),c=function(){var e=t("#tm-section-pop-up");e.parents().removeClass("noanimated"),n.unbind().remove(),e.after(o),e.remove(),o.find(".tm-section-link").show(),o.find(".tm-section-pop").hide()};e.on("click.tmsectionpoplink",function(e){e.preventDefault(),r=!1,n.appendTo("body").click(c),o.before(t.fn.tm_template(Q.tc_section_pop_link,{title:i,close:tm_epo_js.i18n_close}));var a=t("#tm-section-pop-up");a.find(".float_editbox").prepend(o),o.find(".tm-section-link").hide(),o.find(".tm-section-pop").show(),a.parents().addClass("noanimated"),a.find(".details_cancel").click(function(){r||(r=!0,c())}),B.trigger("tmlazy")})})}),t().cpfdependson||(t.fn.cpfdependson=function(e,a,i,o){var n=this,c=0;if(0!=n.length&&"object"==typeof e)return a||(a="show"),i||(i="all"),t.each(e,function(a,i){if("object"!=typeof e)return!0;var n=l(i.element);n&&n.length>0&&(n.each(function(e,a){var i=t(a),n=i.closest("form"),c=t(".tc-extra-product-options"+n.data("product_id_selector")+n.data("epo_id_selector"));if(a&&i.length>0&&(!i.data("tmhaslogicevents")||o)){if(i.is(".tm-epo-variation-element"))w("found_variation.tmlogic",!1,function(t,e){r(c),B.trigger("tm-do-epo-update")}),w("hide_variation.tmlogic",!1,function(t,e){r(c),B.trigger("tm-do-epo-update")});else{var d="change.cpflogic";(i.is(":text")||i.is("textarea"))&&(d="change.cpflogic keyup.cpflogic"),i.off(d).on(d,function(t){r(c)})}i.data("tmhaslogicevents",1);
}}),c++)}),n.each(function(o,r){var n=t(this),d=!1;switch(n.data("matches",c).data("toggle",a).data("what",i).data("fields",e),a){case"show":d=!1;break;case"hide":d=!0}d?n.removeClass("tc-hidden"):n.addClass("tc-hidden"),n.data("isactive",d)}),n.addClass("iscpfdependson").data("iscpfdependson",1),n.each(function(){t(this).addClass("is-epo-depend")})},t.fn.run_cpfdependson=function(){r()}),t.tcepo={temp_floatbox:!1,tm_init_epo:function(t,e,a,i){N(t,e,a,i)}},G.ready(function(){B.on("tc_init_epo_plugin",function(t){C(t)}),t.ajaxPrefilter(function(e,a,i){if("yes"==tm_epo_js.tm_epo_enable_in_shop){var o=!1,r=e.url.split("?");if(r&&r.length>=1&&(r=r[1])){for(var n=r.split("&"),c=0;c<n.length;c++){var d=n[c].split("=");d.length>=1&&d[0]&&d[1]&&"wc-ajax"==d[0]&&"add_to_cart"==d[1]&&(o=!0)}o&&(e.originalsuccess=e.success,e.success=function(i){if(i&&i.error&&i.product_url){var o=t('.ajax_add_to_cart[data-product_id="'+a.data.product_id+'"]');o.removeClass("added"),o.removeClass("loading")}else e.originalsuccess.call(null,i)})}}if("post"!==e.type.toLowerCase(),a.data){var s=a.data;"string"==typeof a.data&&(s=a.data.tmparseParams());var p=a.url.slice(a.url.indexOf("?")+1).tmparseParams();if("quantity"in s&&(s.product_id||s["add-to-cart"]||p.product_id||p["add-to-cart"])){var l=s.product_id||s["add-to-cart"]||p.product_id||p["add-to-cart"],m=t(".tc-extra-product-options.tm-product-id-"+l);if(1==m.length){var f=t(".tc-totals-form.tm-product-id-"+l).find(".cpf-product-price").val(),_=t(".tc-totals-form.tm-product-id-"+l).find(".tc_form_prefix").val(),u={tcajax:1,tcaddtocart:l,cpf_product_price:f};_&&(u.tc_form_prefix=_),e.data=t.param(t.extend("string"==typeof a.data?a.data.tmparseParams():a.data,m.tm_aserializeObject(),u),!1)}}}}),G.ajaxSuccess(function(e,a,i){t(".tm-cart-link").tmpoplink();var o={quick_view_plugin:t(".woocommerce.quick-view").not("body"),theme_flatsome:t(".product-lightbox"),theme_kleo:t("#productModal"),yith_quick_view_plugin:t("#yith-quick-view-modal,.yith-quick-view.yith-modal,.yith-quick-view.yith-inline"),venedor_quick_view_plugin:t(".quickview-wrap"),rubbez_quick_view:t("#quickview-content"),jckqv_quick_view:t("#jckqv"),themify_quick_view:t("#product_single_wrapper"),porto_quick_view:t(".quickview-wrap"),woocommerce_product_layouts:t(".dhvc-woo-product-quickview"),nm_getproduct:t("#popup")};for(var r in o)if(o.hasOwnProperty(r)&&o[r].length){if("yith_quick_view_plugin"==r&&!o[r].find(".product").length>0)continue;"jckqv_quick_view"!=r&&"yith_quick_view_plugin"!=r||(U=!0),S=o[r];var n=S.find(L).attr("data-product-id"),c=S.find(L).attr("data-epo-id");N(S,!0,n,c),B.trigger("tmlazy"),B.trigger("tm_epo_loaded_quickview"),t.jMaskGlobals&&S.find(t.jMaskGlobals.maskElements).each(function(){var e=t(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))})}}),t("#wholesale_form").on("submit",function(){var e=t("form.cart").find(P).val(),a=t(L+'.tm-cart-main[data-product-id="'+e+'"]').tm_clone(),i=t('.tm-totals-form-main[data-product-id="'+e+'"]').tm_clone(),o=t('<div class="tm-hidden tm-formepo"></div>');return o.append(a),o.append(i),t(this).append(o),!0}),C(),t(".tm-cart-link").tmpoplink(),H.on("updated_checkout",function(){t(".tm-cart-link").tmpoplink()}),B.trigger("tmlazy"),B.trigger("tm_epo_loaded")})}(jQuery),function(t){t(document).ready(function(){t(document).on("click",".jckqv-qty-spinner",function(){t(this).closest(".quantity").find("input.qty").trigger("change")}),t(document).on("click","#add_to_quote",function(e){if(tm_epo_js&&"yes"==tm_epo_js.tm_epo_global_enable_validation){var a=t(this).parents("form");if(a.length>0&&!a.tc_validate().form())return void e.stopImmediatePropagation()}})})}(jQuery);